(this.webpackJsonpv2=this.webpackJsonpv2||[]).push([[0],{15:function(e,t,n){e.exports=n(24)},20:function(e,t,n){},21:function(e,t,n){},24:function(e,t,n){"use strict";n.r(t);var r,o=n(0),i=n.n(o),a=n(14),c=n.n(a),s=(n(20),n(21),n(5)),l=n.n(s),u=n(10),f=n(3),d=n(6),h=n(7),g=n(8);function p(e){var t=(e&r.Right)===r.Right,n=(e&r.Left)===r.Left,o=(e&r.Down)===r.Down,i=(e&r.Up)===r.Up;return{isRight:t,isLeft:n,isDown:o,isUp:i,isDiagonal:(i||o)&&(t||n),isHorizontal:(t||n)&&!(i||o),isVertical:(i||o)&&!(t||n)}}function v(e){var t=p(e);return(t.isUp?"up":"")+(t.isDown?"down":"")+(t.isRight?"right":"")+(t.isLeft?"left":"")}function y(e){var t=function(e){return"(".concat(e.x,", ").concat(e.y,")")};return Array.isArray(e)?"[".concat(e.map(t).join(", "),"]"):t(e)}!function(e){e[e.None=0]="None",e[e.Right=1]="Right",e[e.Left=2]="Left",e[e.Down=4]="Down",e[e.Up=8]="Up"}(r||(r={}));var m;!function(e){e[e.None=0]="None",e[e.Verbose=1]="Verbose",e[e.Debug=2]="Debug",e[e.Info=3]="Info",e[e.Warning=4]="Warning",e[e.Error=5]="Error"}(m||(m={}));var L=new(function(){function e(){Object(f.a)(this,e),this.MIN_LEVEL=m.Debug}return Object(h.a)(e,[{key:"group",value:function(e){console.groupCollapsed(e)}},{key:"groupEnd",value:function(){console.groupEnd()}},{key:"v",value:function(e){if(this.MIN_LEVEL==m.Verbose){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(t=console).debug.apply(t,[e].concat(r))}}},{key:"d",value:function(e){if(this.MIN_LEVEL!==m.None&&this.MIN_LEVEL<=m.Debug){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(t=console).debug.apply(t,[e].concat(r))}}},{key:"i",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];this.MIN_LEVEL!==m.None&&this.MIN_LEVEL<=m.Info&&(t=console).info.apply(t,[e].concat(r))}},{key:"w",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];this.MIN_LEVEL!==m.None&&this.MIN_LEVEL<=m.Warning&&(t=console).warn.apply(t,[e].concat(r))}},{key:"e",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];this.MIN_LEVEL!==m.None&&(t=console).error.apply(t,[e].concat(r))}},{key:"minLevel",get:function(){return m[this.MIN_LEVEL]}}]),e}());function b(e){L.MIN_LEVEL=e}var E=L,w=function(){var e=Array(),t=Array().concat(Array(3).fill(r.Right),Array(3).fill(r.Down),Array(3).fill(r.Right),Array(3).fill(r.Down),Array(3).fill(r.Left),Array(3).fill(r.Down),Array(3).fill(r.Left),Array(3).fill(r.Up),Array(3).fill(r.Left),Array(3).fill(r.Up),Array(3).fill(r.Right),Array(3).fill(r.Up)),n=-2,o=-5;return t.forEach((function(t){e.push({x:n,y:o});var r=p(t),i=r.isLeft,a=r.isRight,c=r.isDown,s=r.isUp;n=a?n+1===0?1:n+1:i?n-1===0?-1:n-1:n,o=c?o+1===0?1:o+1:s?o-1===0?-1:o-1:o})),e}();function C(e,t){if(e===t)return!0;var n=[p(e),p(t)],r=n[0],o=n[1];return!(!r.isVertical||!o.isVertical)||(!(!r.isHorizontal||!o.isHorizontal)||(!!(r.isRight&&r.isUp&&o.isLeft&&o.isDown)||(!!(o.isRight&&o.isUp&&r.isLeft&&r.isDown)||(!!(r.isLeft&&r.isUp&&o.isRight&&o.isDown)||!!(o.isLeft&&o.isUp&&r.isRight&&r.isDown)))))}function x(e){if(!Array.isArray(e)||0===e.length)return"";var t=Array();E.group("getClassNamesForLineDirections");var n,r=Object(d.a)(e);try{for(r.s();!(n=r.n()).done;){var o=n.value,i=p(o);E.d("Direction %s (%s): %s",o,v(o),JSON.stringify(i)),(i.isUp&&i.isRight||i.isDown&&i.isLeft)&&t.push("line-right-up"),(i.isDown&&i.isRight||i.isUp&&i.isLeft)&&t.push("line-right-down"),!i.isUp&&!i.isDown||i.isRight||i.isLeft||t.push("line-vertical"),!i.isRight&&!i.isLeft||i.isUp||i.isDown||t.push("line-horizontal")}}catch(c){r.e(c)}finally{r.f()}var a=t.join(" ");return E.v("Directions [".concat(e.map(v).join(", "),"] resulted in className=%s"),a),E.groupEnd(),a}function O(e,t){var n=p(t),r=e.x,o=e.y;return n.isUp&&(o=A(o,1)),n.isDown&&(o=A(o,-1)),n.isRight&&(r=A(r,1)),n.isLeft&&(r=A(r,-1)),{x:r,y:o}}function A(e,t){return e+t===0?A(e+t,t):e+t}!function(){var e=Object(g.a)(w),t=e.map((function(e){var t=e.x;e.y;return t})),n=e.map((function(e){e.x;return e.y})),r=Math.min.apply(Math,Object(g.a)(t))-5,o=Math.max.apply(Math,Object(g.a)(t))+5,i=Math.min.apply(Math,Object(g.a)(n))-5,a=Math.max.apply(Math,Object(g.a)(n))+5;console.debug("Creating a matrix from [%o, %o] to [%o, %o]",r,i,o,a);for(var c=function(t){for(var n=function(n){e.some((function(e){var r=e.x,o=e.y;return r===t&&o===n}))||e.push({x:t,y:n})},r=i;r<a;r++)n(r)},s=r;s<o;s++)c(s)}();var j=n(1),D=function e(t){Object(f.a)(this,e),this.coords=t,this.isOpened=!1,this.lineDirections=Array()};D.prototype.toString=function(){return"".concat(this.isOpened?"Opened":"Closed"," cell ").concat(y(this.coords)," (dir=").concat(this.lineDirections.map((function(e){return v(e)})).join(", "),")")},Object(j.j)(D,{isOpened:j.o,lineDirections:j.o});var k=D,N=function(){function e(){var t=this;Object(f.a)(this,e),this.lines=Array(),this.selectedCellCoords=void 0,this.cells=Array();for(var n=9;n>=-9;n=A(n,-1))for(var r=-9;r<=9;r=A(r,1))this.cells.push(new k({x:r,y:n}));this.initiateBoard().then((function(){Object(j.f)((function(){t.lines.forEach((function(e){var n=e.coords,r=e.direction;n.forEach((function(e){var n=e.x,o=e.y,i=t.cellAt(n,o);i.isOpened||(i.isOpened=!0),i.lineDirections.some((function(e){return e===r}))||(i.lineDirections.push(r),E.d("Added direction (%o) to cell at %o",v(r),y(i.coords)))}))}))}))}))}return Object(h.a)(e,[{key:"highlightedCoords",get:function(){return this.selectedCellCoords?this.getPossibleLines(this.selectedCellCoords).map((function(e){return e.coords})).reduce((function(e,t){return e.concat(t)}),[]):[]}},{key:"lineCount",get:function(){var e;return(null===(e=this.lines)||void 0===e?void 0:e.length)||0}},{key:"endOfLineCoords",get:function(){return this.selectedCellCoords?this.getPossibleLines(this.selectedCellCoords).map((function(e){return e.coords[e.coords.length-1]})):[]}},{key:"rows",get:function(){var e=this,t=Array();return this.cells.slice().sort((function(e,t){return e.coords.x-t.coords.x})).slice().sort((function(e,t){return t.coords.y-e.coords.y})).forEach((function(n){var r=n.coords.y,o=t.find((function(e){return e.yIndex===r}));o?o.cells.push(n):t.push({yIndex:r,cells:[n],game:e})})),t}}]),Object(h.a)(e,[{key:"initiateBoard",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,r,o=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object(d.a)(w),e.prev=1,r=l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.value,e.next=3,new Promise((function(e){return setTimeout((function(){o.cellAt(t.x,t.y).isOpened=!0,e(!0)}),8)}));case 3:case"end":return e.stop()}}),e)})),t.s();case 4:if((n=t.n()).done){e.next=8;break}return e.delegateYield(r(),"t0",6);case 6:e.next=4;break;case 8:e.next=13;break;case 10:e.prev=10,e.t1=e.catch(1),t.e(e.t1);case 13:return e.prev=13,t.f(),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(){return e.apply(this,arguments)}}()},{key:"cellAt",value:function(e,t){return this.cells.find((function(n){return n.coords.x===e&&n.coords.y===t}))}},{key:"getPossibleLines",value:function(e){var t=this,n=E.MIN_LEVEL;n<m.Info&&b(m.Info);var o,i=Array(),a=Object(d.a)([r.Up,r.Down,r.Left,r.Right,r.Up|r.Left,r.Up|r.Right,r.Down|r.Left,r.Down|r.Right]);try{var c=function(){for(var n=o.value,r=e.x,a=e.y,c=0,s=0,l=Array(),u=0;u<5;u++){var f;l.push({x:r,y:a});var d=t.cellAt(r,a);(null===d||void 0===d?void 0:d.isOpened)||s++,(null===d||void 0===d||null===(f=d.lineDirections)||void 0===f?void 0:f.some((function(e){return e===n||C(e,n)})))||c++;var h=O({x:r,y:a},n);r=h.x,a=h.y}if(5===c&&s<=1){var g=new M(l);E.i("Possible line from coords %s to direction %s: %s",y(e),v(n),y(l)),i.push(g)}};for(a.s();!(o=a.n()).done;)c()}catch(s){a.e(s)}finally{a.f()}return b(n),i}},{key:"tryCompleteLine",value:function(e){var t=this.selectedCellCoords;if(t){E.i("Attempting to complete line from %o to %o",y(t),y(e));var n,r=this.getLineForCoords(t,e),o=Object(d.a)(r.coords);try{for(o.s();!(n=o.n()).done;){var i=n.value,a=i.x,c=i.y,s=this.cellAt(a,c);s.isOpened||(s.isOpened=!0,E.i("Opened cell at ",y(s.coords)))}}catch(l){o.e(l)}finally{o.f()}this.lines.push(r),E.d("Added line at %s. Line count: %o.",y(r.coords),this.lineCount),this.selectedCellCoords=void 0,E.d("Reset selected cell coords.")}else E.w("Could not complete line due to selected coords being falsy.")}},{key:"getLineForCoords",value:function(e,t){return this.getPossibleLines(e).find((function(e){return e.coords.some((function(e){return r=t,(n=e).x===r.x&&n.y===r.y;var n,r}))}))}}]),e}();N.origo={x:0,y:0};var I,M=function(){function e(t){Object(f.a)(this,e),this.coords=t}return Object(h.a)(e,[{key:"direction",get:function(){var e=function(e,t){var n=r.None;return e.x<t.x?n|=r.Right:e.x>t.x&&(n|=r.Left),e.y<t.y?n|=r.Up:e.y>t.y&&(n|=r.Down),n}(this.coords[0],this.coords[1]);return e===r.None&&E.w("Coords %o resulted in a 0-direction.",y([this.coords[0],this.coords[1]])),e}}]),e}();!function(e){e[e.NotStarted=0]="NotStarted",e[e.Started=1]="Started",e[e.Finished=2]="Finished"}(I||(I={})),Object(j.j)(N,{selectedCellCoords:j.o,highlightedCoords:j.g,endOfLineCoords:j.g,lines:j.o,rows:j.g,cells:j.o,lineCount:j.g});var R=N,U=n(4);function V(e){var t,n=null===(t=e.game)||void 0===t?void 0:t.selectedCellCoords;return(null===n||void 0===n?void 0:n.x)===e.coords.x&&(null===n||void 0===n?void 0:n.y)===e.coords.y}var S=function(e,t,n,r){return{width:24,height:24,fontSize:t||e?14:12,textAlign:"center",backgroundColor:r?"rgb(90, 190, 150)":e&&!n?"red":e&&n?"rgb(103, 230, 123)":n?"rgb(90, 190, 150)":"#f9f9f9"}},_=Object(U.a)((function(e){var t=e.coords,n=t.x,r=t.y,o=e.game.cellAt(n,r),a=e.game.highlightedCoords.some((function(e){return e.x===n&&e.y===r})),c=a&&e.game.endOfLineCoords.some((function(e){return e.x===n&&e.y===r}));return i.a.createElement("td",{className:"noselect cell ".concat(x(o.lineDirections)),style:S(V(e),o.isOpened,a,c),onClick:function(){var t,o;(null===(t=e.game.selectedCellCoords)||void 0===t?void 0:t.x)===n&&(null===(o=e.game.selectedCellCoords)||void 0===o?void 0:o.y)===r?e.game.selectedCellCoords=void 0:a?e.game.tryCompleteLine(e.coords):e.game.selectedCellCoords=e.coords},"data-coords":"[".concat(n,", ").concat(r,"]")},o.isOpened||V(e)?i.a.createElement(i.a.Fragment,null,"\u25cb"):i.a.createElement(i.a.Fragment,null,"\u2022"))})),F=function(e){return i.a.createElement("tr",null,e.cells.map((function(t){return i.a.createElement(_,Object.assign({game:e.game,key:t.coords.x},t))})))},P=Object(U.a)((function(e){return i.a.createElement("thead",null,i.a.createElement("tr",{style:{height:40}},i.a.createElement("td",{colSpan:2},"Points:"),i.a.createElement("td",{colSpan:2},e.game.lineCount),i.a.createElement("td",{colSpan:3},i.a.createElement("button",{onClick:function(){L.MIN_LEVEL-1===-1?L.MIN_LEVEL=m.Error:L.MIN_LEVEL--}},"LogLevel-- (",E.minLevel,")")),i.a.createElement("td",{colSpan:2},i.a.createElement("button",{onClick:function(){return function(){return H.apply(this,arguments)}()}},"Load")),i.a.createElement("td",{colSpan:2},i.a.createElement("button",{onClick:function(){return function(){var e=JSON.stringify(B.game.lines);localStorage.setItem("game_lines",e)}()}},"Save")),i.a.createElement("td",{colSpan:5,style:{textAlign:"right"}},i.a.createElement("button",{onClick:function(){B.game=new R}},"New game"))))})),z={width:480,margin:"auto"},J=Object(U.a)((function(e){var t=e.game;return i.a.useEffect((function(){Object(j.f)((function(){console.debug("highlightedCoords: ",t.highlightedCoords)}))}),[t]),i.a.createElement("table",{cellSpacing:0,style:z},i.a.createElement(P,{game:t}),i.a.createElement("tbody",null,t.rows.map((function(e){return i.a.createElement(F,Object.assign({game:t,key:e.yIndex},e))}))))})),W=function e(){Object(f.a)(this,e),this.game=new R};Object(j.j)(W,{game:j.o});var B=new W;function H(){return(H=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=localStorage.getItem("game_lines"))){e.next=13;break}return e.prev=2,n=JSON.parse(t),B.game=new R,B.game.lines.splice(0,B.game.lines.length),n.forEach((function(e){e=new M(e.coords),B.game.lines.push(e)})),e.abrupt("return",!0);case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",!1);case 13:return e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}var T=Object(U.a)((function(){return i.a.createElement(J,{game:B.game})}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[15,1,2]]]);
//# sourceMappingURL=main.43637656.chunk.js.map