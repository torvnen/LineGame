{"version":3,"sources":["classes/Direction.ts","classes/constants.ts","classes/Log.ts","classes/utils.ts","classes/Cell.ts","mui-themes.ts","hooks/useThemeSelector.ts","components/LineComponent.tsx","classes/Line.ts","classes/Game.ts","classes/Coords.ts","components/CellComponent.tsx","components/Row.tsx","components/Flexbox.tsx","components/Title.tsx","components/ThemeSelector.tsx","components/Menu.tsx","App.tsx","components/LineOverlay.tsx","hooks/useWindowSize.ts","components/Board.tsx","serviceWorker.ts","index.tsx"],"names":["Direction","dissectDirection","d","isRight","Right","isLeft","Left","isDown","Down","isUp","Up","isDiagonal","isHorizontal","isVertical","directionToString","dir","coordsToString","c","coordToString","x","y","Array","isArray","map","join","LogLevel","log","MIN_LEVEL","Debug","label","console","groupCollapsed","groupEnd","message","this","Verbose","optionalParams","debug","None","Info","info","Warning","warn","error","setLogLevel","level","initialCellCoords","coords","directions","concat","fill","forEach","push","isRtl","isLtr","isUtd","isDtu","getAngleForDirection","dd","NaN","directionsOverlap","d1","d2","dir1","dir2","getNextCoords","direction","sumUntilNotZero","a","sumToAdd","grid","xs","ys","startX","Math","min","endX","max","startY","endY","i","j","some","Cell","isOpened","tdRef","lineDirections","prototype","toString","decorate","observable","createTheme","colors","createMuiTheme","palette","primary","main","darkest","action","active","lightest","disabled","color2","secondary","color3","success","warning","background","default","paper","text","divider","typography","allVariants","color","fontFamily","button","textTransform","body1","themes","Default","init","theme","Object","keys","setTheme","useThemeSelector","singletonHook","React","useState","useEffect","values","indexOf","LineComponent","observer","props","model","dimensions","style","left","offsetX","width","lengthPx","height","top","offsetY","transformOrigin","transform","rotationDeg","position","animationName","opacity","animationDuration","animationTimingFunction","LineModel","game","firstCell","lastCell","c1","c2","getDirectionForCoords","cellAt","length","undefined","firstTd","current","lastTd","cellWidth","offsetWidth","cellHeight","offsetHeight","offsetTop","LINE_THICKNESS","abs","offsetLeft","Error","floor","sqrt","pow","ceil","computed","GameState","Game","lines","selectedCellCoords","cells","initiateBoardAsync","then","previousLineCount","autorun","initiateBoard","cell","ld","possibleLines","l","reduce","prev","curr","rows","slice","sort","b","row","find","r","yIndex","coord","animDelayMs","Promise","setTimeout","line","getLineForCoords","lineCount","w","ll","lineLength","unopenedCells","lineCoords","next","origo","highlightedCoords","endOfLineCoords","isCellSelected","makeStyle","isSelected","isHighlighted","isEndOfLine","fontSize","textAlign","dark","backgroundColor","light","backgroundSize","CellComponent","useRef","ref","className","onClick","tryCompleteLine","data-coords","Row","key","Flexbox","display","children","Title","isMenuOpen","setIsMenuOpen","padding","flexGrow","paddingBottom","IconButton","themeButtonStyle","cursor","margin","ThemeSelector","currentThemeIndex","themeKeys","flexFlow","e","stopPropagation","paddingTop","textIndent","previousKey","setPreviousTheme","flexDirection","setNextTheme","MenuLinkItem","icon","ListItem","Button","fullWidth","marginRight","Typography","marginTop","Menu","Drawer","anchor","open","onClose","alignItems","overflow","MenuList","marginBottom","Divider","gameWrapper","linesJson","JSON","stringify","localStorage","setItem","saveGame","loadGame","LineOverlayComponent","tableRef","setStyle","windowSize","isClient","window","getSize","innerWidth","innerHeight","setWindowSize","addEventListener","handleResize","removeEventListener","useWindowSize","updateId","setUpdateId","clientHeight","pointerEvents","BOARD_MATRIX_SIZE","Board","justifyContent","border","borderRadius","spacing","cellSpacing","GameWrapper","getItem","parse","splice","App","ThemeProvider","Boolean","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch"],"mappings":"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","file":"static/js/main.abddec38.chunk.js","sourcesContent":["import Coords from \"./Coords\";\r\n\r\nexport enum Direction {\r\n  None = 0,\r\n  Right = 1 << 0,\r\n  Left = 1 << 1,\r\n  Down = 1 << 2,\r\n  Up = 1 << 3,\r\n}\r\n\r\nexport function dissectDirection(d: Direction) {\r\n  const [isRight, isLeft, isDown, isUp] = [\r\n    (d & Direction.Right) === Direction.Right,\r\n    (d & Direction.Left) === Direction.Left,\r\n    (d & Direction.Down) === Direction.Down,\r\n    (d & Direction.Up) === Direction.Up,\r\n  ];\r\n  return {\r\n    isRight,\r\n    isLeft,\r\n    isDown,\r\n    isUp,\r\n    isDiagonal: (isUp || isDown) && (isRight || isLeft),\r\n    isHorizontal: (isRight || isLeft) && !(isUp || isDown),\r\n    isVertical: (isUp || isDown) && !(isRight || isLeft),\r\n  };\r\n}\r\n\r\nexport function directionToString(d: Direction) {\r\n  const dir = dissectDirection(d);\r\n  return (\r\n    (dir.isUp ? \"up\" : \"\") +\r\n    (dir.isDown ? \"down\" : \"\") +\r\n    (dir.isRight ? \"right\" : \"\") +\r\n    (dir.isLeft ? \"left\" : \"\")\r\n  );\r\n}\r\n\r\nexport function coordsToString(c: Coords | Coords[]): String {\r\n  const coordToString = (c: Coords) => {\r\n    return `(${c.x}, ${c.y})`;\r\n  };\r\n  return Array.isArray(c)\r\n    ? `[${c.map(coordToString).join(\", \")}]`\r\n    : coordToString(c);\r\n}\r\n\r\nexport function allDirections(): Direction[] {\r\n  return [\r\n    Direction.Up,\r\n    Direction.Down,\r\n    Direction.Left,\r\n    Direction.Right,\r\n    Direction.Up | Direction.Left,\r\n    Direction.Up | Direction.Right,\r\n    Direction.Down | Direction.Left,\r\n    Direction.Down | Direction.Right,\r\n  ];\r\n}\r\n","export const BOARD_MATRIX_SIZE = 20;\r\nexport const CELL_SIZE = 24;\r\nexport const LOCALSTORAGE_STATE_KEY = \"game_lines\";\r\n","import { decorate, computed, observable } from \"mobx\";\r\n\r\nexport enum LogLevel {\r\n  None = 0,\r\n  Verbose,\r\n  Debug,\r\n  Info,\r\n  Warning,\r\n  Error,\r\n}\r\n\r\nclass Log {\r\n  MIN_LEVEL = LogLevel.Debug;\r\n\r\n  get minLevel(): String {\r\n    return LogLevel[this.MIN_LEVEL];\r\n  }\r\n  group(label: String) {\r\n    console.groupCollapsed(label);\r\n  }\r\n  groupEnd() {\r\n    console.groupEnd();\r\n  }\r\n  v(message?: any, ...optionalParams: any[]) {\r\n    if (this.MIN_LEVEL == LogLevel.Verbose) {\r\n      console.debug(message, ...optionalParams);\r\n    }\r\n  }\r\n  d(message?: any, ...optionalParams: any[]) {\r\n    if (this.MIN_LEVEL !== LogLevel.None && this.MIN_LEVEL <= LogLevel.Debug) {\r\n      console.debug(message, ...optionalParams);\r\n    }\r\n  }\r\n  i(message?: any, ...optionalParams: any[]) {\r\n    if (this.MIN_LEVEL !== LogLevel.None && this.MIN_LEVEL <= LogLevel.Info)\r\n      console.info(message, ...optionalParams);\r\n  }\r\n  w(message?: any, ...optionalParams: any[]) {\r\n    if (this.MIN_LEVEL !== LogLevel.None && this.MIN_LEVEL <= LogLevel.Warning)\r\n      console.warn(message, ...optionalParams);\r\n  }\r\n  e(message?: any, ...optionalParams: any[]) {\r\n    if (this.MIN_LEVEL !== LogLevel.None)\r\n      console.error(message, ...optionalParams);\r\n  }\r\n}\r\n\r\nconst log = new Log();\r\n\r\nexport function decreaseLogLevel() {\r\n  if (log.MIN_LEVEL - 1 === -1) log.MIN_LEVEL = LogLevel.Error;\r\n  else log.MIN_LEVEL--;\r\n}\r\n\r\nexport function setLogLevel(level: LogLevel) {\r\n  log.MIN_LEVEL = level;\r\n}\r\n\r\nexport default log;\r\n","import { Direction, dissectDirection, directionToString } from \"./Direction\";\r\nimport Coords from \"./Coords\";\r\nimport { BOARD_MATRIX_SIZE } from \"./constants\";\r\nimport log from \"./Log\";\r\n\r\nexport const initialCellCoords: Array<Coords> = (() => {\r\n  const coords = Array<Coords>();\r\n  const directions: Array<Direction> = Array().concat(\r\n    Array(3).fill(Direction.Right),\r\n    Array(3).fill(Direction.Down),\r\n    Array(3).fill(Direction.Right),\r\n    Array(3).fill(Direction.Down),\r\n    Array(3).fill(Direction.Left),\r\n    Array(3).fill(Direction.Down),\r\n    Array(3).fill(Direction.Left),\r\n    Array(3).fill(Direction.Up),\r\n    Array(3).fill(Direction.Left),\r\n    Array(3).fill(Direction.Up),\r\n    Array(3).fill(Direction.Right),\r\n    Array(3).fill(Direction.Up)\r\n  );\r\n  let x = -2;\r\n  let y = -5;\r\n  directions.forEach((d) => {\r\n    coords.push({ x, y });\r\n    const {\r\n      isLeft: isRtl,\r\n      isRight: isLtr,\r\n      isDown: isUtd,\r\n      isUp: isDtu,\r\n    } = dissectDirection(d);\r\n    x = isLtr\r\n      ? x + 1 === 0\r\n        ? 1\r\n        : x + 1\r\n      : isRtl\r\n      ? x - 1 === 0\r\n        ? -1\r\n        : x - 1\r\n      : x;\r\n    y = isUtd\r\n      ? y + 1 === 0\r\n        ? 1\r\n        : y + 1\r\n      : isDtu\r\n      ? y - 1 === 0\r\n        ? -1\r\n        : y - 1\r\n      : y;\r\n  });\r\n  return coords;\r\n})();\r\n\r\nexport function getAngleForDirection(d: Direction): number {\r\n  const dd = dissectDirection(d);\r\n  return dd.isHorizontal && dd.isRight\r\n    ? 0\r\n    : dd.isRight && dd.isDown\r\n    ? 45\r\n    : dd.isVertical && dd.isDown\r\n    ? 90\r\n    : dd.isLeft && dd.isDown\r\n    ? 135\r\n    : dd.isHorizontal && dd.isLeft\r\n    ? 180\r\n    : dd.isLeft && dd.isUp\r\n    ? 225\r\n    : dd.isVertical && dd.isUp\r\n    ? 270\r\n    : dd.isRight && dd.isUp\r\n    ? 315\r\n    : NaN;\r\n}\r\n\r\nexport function getDirectionForCoords(c1: Coords, c2: Coords) {\r\n  let d = Direction.None;\r\n  if (c1.x < c2.x) d |= Direction.Right;\r\n  else if (c1.x > c2.x) d |= Direction.Left;\r\n  if (c1.y < c2.y) d |= Direction.Up;\r\n  else if (c1.y > c2.y) d |= Direction.Down;\r\n  return d;\r\n}\r\n\r\nexport function directionsOverlap(d1: Direction, d2: Direction): boolean {\r\n  if (d1 === d2) return true;\r\n  const [dir1, dir2] = [dissectDirection(d1), dissectDirection(d2)];\r\n  // Vertical line\r\n  return dir1.isVertical && dir2.isVertical // Vertical: \"|\"\r\n    ? true\r\n    : dir1.isHorizontal && dir2.isHorizontal // Horizontal: \"-\"\r\n    ? true\r\n    : dir1.isRight && dir1.isUp && dir2.isLeft && dir2.isDown // Diagonal 1: \"/\"\r\n    ? true\r\n    : dir2.isRight && dir2.isUp && dir1.isLeft && dir1.isDown // Diagonal 1 with reversed comparison\r\n    ? true\r\n    : dir1.isLeft && dir1.isUp && dir2.isRight && dir2.isDown // Diagonal 2: \"\\\"\r\n    ? true\r\n    : dir2.isLeft && dir2.isUp && dir1.isRight && dir1.isDown // Diagonal 2 with reversed comparison\r\n    ? true\r\n    : false;\r\n}\r\n\r\nexport function getClassNamesForLineDirections(\r\n  directions: Direction[]\r\n): String {\r\n  if (!Array.isArray(directions) || directions.length === 0) return \"\";\r\n  const a = Array<String>();\r\n  log.group(\"getClassNamesForLineDirections\");\r\n  for (const direction of directions) {\r\n    const d = dissectDirection(direction);\r\n    log.d(\r\n      \"Direction %s (%s): %s\",\r\n      direction,\r\n      directionToString(direction),\r\n      JSON.stringify(d)\r\n    );\r\n    if ((d.isUp && d.isRight) || (d.isDown && d.isLeft))\r\n      a.push(\"line-right-up\");\r\n    if ((d.isDown && d.isRight) || (d.isUp && d.isLeft))\r\n      a.push(\"line-right-down\");\r\n    if ((d.isUp || d.isDown) && !d.isRight && !d.isLeft)\r\n      a.push(\"line-vertical\");\r\n    if ((d.isRight || d.isLeft) && !d.isUp && !d.isDown)\r\n      a.push(\"line-horizontal\");\r\n  }\r\n  const s = a.join(\" \");\r\n  log.v(\r\n    `Directions [${directions\r\n      .map(directionToString)\r\n      .join(\", \")}] resulted in className=%s`,\r\n    s\r\n  );\r\n  log.groupEnd();\r\n\r\n  return s;\r\n}\r\n\r\nexport function getNextCoords(coords: Coords, direction: Direction): Coords {\r\n  const d = dissectDirection(direction);\r\n  let { x, y } = coords;\r\n  if (d.isUp) y = sumUntilNotZero(y, 1);\r\n  if (d.isDown) y = sumUntilNotZero(y, -1);\r\n  if (d.isRight) x = sumUntilNotZero(x, 1);\r\n  if (d.isLeft) x = sumUntilNotZero(x, -1);\r\n  // log.d(\r\n  //   \"Next coords from %s in direction %s is at %s\",\r\n  //   coordsToString(coords),\r\n  //   directionToString(direction),\r\n  //   coordsToString({ x, y })\r\n  // );\r\n  return { x, y };\r\n}\r\n\r\nexport function sumUntilNotZero(a: number, sumToAdd: number): number {\r\n  return a + sumToAdd === 0\r\n    ? sumUntilNotZero(a + sumToAdd, sumToAdd)\r\n    : a + sumToAdd;\r\n}\r\n\r\nexport const initialGameGrid = ((): Array<Coords> => {\r\n  const grid = [...initialCellCoords];\r\n  const padding = (BOARD_MATRIX_SIZE - 10) / 2;\r\n  const xs = grid.map(({ x, y }) => x);\r\n  const ys = grid.map(({ x, y }) => y);\r\n  const [startX, endX, startY, endY] = [\r\n    Math.min(...xs) - padding,\r\n    Math.max(...xs) + padding,\r\n    Math.min(...ys) - padding,\r\n    Math.max(...ys) + padding,\r\n  ];\r\n  console.debug(\r\n    \"Creating a matrix from [%o, %o] to [%o, %o]\",\r\n    startX,\r\n    startY,\r\n    endX,\r\n    endY\r\n  );\r\n  for (let i = startX; i < endX; i++)\r\n    for (let j = startY; j < endY; j++)\r\n      if (!grid.some(({ x, y }) => x === i && y === j))\r\n        grid.push({ x: i, y: j });\r\n  return grid;\r\n})();\r\n","import { decorate, observable } from \"mobx\";\r\nimport Coords from \"./Coords\";\r\nimport { Direction, coordsToString, directionToString } from \"./Direction\";\r\n\r\nclass Cell {\r\n  isOpened = false;\r\n  tdRef?: React.RefObject<HTMLTableCellElement>;\r\n  readonly lineDirections = Array<Direction>();\r\n  constructor(public readonly coords: Coords) {}\r\n}\r\n\r\nCell.prototype.toString = function (): string {\r\n  return `${this.isOpened ? \"Opened\" : \"Closed\"} cell ${coordsToString(\r\n    this.coords\r\n  )} (dir=${this.lineDirections.map((d) => directionToString(d)).join(\", \")})`;\r\n};\r\n\r\ndecorate(Cell, {\r\n  isOpened: observable,\r\n  lineDirections: observable,\r\n});\r\n\r\nexport default Cell;\r\n","import { createMuiTheme, Theme } from \"@material-ui/core\";\r\n\r\nconst createTheme = (colors: {\r\n  lightest: string;\r\n  color2: string;\r\n  color3: string;\r\n  darkest: string;\r\n}) =>\r\n  createMuiTheme({\r\n    palette: {\r\n      primary: {\r\n        main: colors.darkest,\r\n      },\r\n      action: {\r\n        active: colors.lightest,\r\n        disabled: colors.color2,\r\n      },\r\n      secondary: { main: colors.color3 },\r\n      success: { main: colors.lightest },\r\n      info: { main: colors.color2 },\r\n      warning: { main: colors.color3 },\r\n      background: {\r\n        default: colors.darkest,\r\n        paper: colors.color3,\r\n      },\r\n      text: {\r\n        primary: colors.lightest,\r\n        secondary: colors.lightest,\r\n      },\r\n      divider: colors.lightest,\r\n    },\r\n    typography: {\r\n      allVariants: {\r\n        color: colors.lightest,\r\n        fontFamily:\r\n          'source-code-pro, Menlo, Monaco, Consolas, \"Courier New\", monospace',\r\n      },\r\n      button: {\r\n        textTransform: \"none\",\r\n      },\r\n      body1: {\r\n        color: colors.lightest,\r\n      },\r\n    },\r\n  });\r\n\r\nexport const themes: { [id: string]: Theme } = {\r\n  Default: createTheme({\r\n    lightest: \"#e7dfd5\",\r\n    color2: \"#84a9ac\",\r\n    color3: \"#3b6978\",\r\n    darkest: \"#204051\",\r\n  }),\r\n  \"Green Desert\": createTheme({\r\n    lightest: \"#e5e4cc\",\r\n    color2: \"#bac7a7\",\r\n    color3: \"#889e81\",\r\n    darkest: \"#698474\"\r\n  }),\r\n  \"Bumblebee\": createTheme({\r\n    lightest: \"#f4f4f4\",\r\n    color2: \"#f0a500\",\r\n    color3: \"#cf7500\",\r\n    darkest: \"#000000\"\r\n  }),\r\n  \"Watermelon\": createTheme({\r\n    lightest: \"#bbf1c8\",\r\n    color2: \"#80bdab\",\r\n    color3: \"#342b38\",\r\n    darkest: \"#ff9595\"\r\n  }),\r\n  \"Limestone\": createTheme({\r\n    lightest: \"#e1ffc2\",\r\n    color2: \"#c7e2b2\",\r\n    color3: \"#89c9b8\",\r\n    darkest: \"#092532\"\r\n  }),\r\n};\r\n","import React from \"react\";\r\nimport { Theme } from \"@material-ui/core/styles\";\r\nimport { themes } from \"../mui-themes\";\r\nimport { singletonHook } from \"react-singleton-hook\";\r\n\r\nconst init = {\r\n  theme: themes[Object.keys(themes)[0]],\r\n  setTheme: () => {},\r\n};\r\n\r\nfunction useThemeSelectorImpl() {\r\n  const [theme, setTheme] = React.useState<Theme>(init.theme);\r\n  React.useEffect(() => {\r\n    console.log(\r\n      \"[useThemeSetter]: Theme was changed to\",\r\n      Object.keys(themes)[Object.values(themes).indexOf(theme)]\r\n    );\r\n  }, [theme]);\r\n\r\n  return {\r\n    theme,\r\n    setTheme,\r\n  };\r\n}\r\n\r\nexport const useThemeSelector = singletonHook(init, useThemeSelectorImpl);\r\n","import React, { CSSProperties } from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport Game from \"../classes/Game\";\r\nimport { LineModel } from \"../classes/Line\";\r\nimport { useThemeSelector } from \"../hooks/useThemeSelector\";\r\n\r\nexport const LINE_THICKNESS = 3;\r\nconst LINE_OPACITY = 0.75;\r\nexport const LineComponent = observer((props: LineComponentProps) => {\r\n  const { model } = props;\r\n  const { dimensions } = model;\r\n  const { theme } = useThemeSelector();\r\n  return (\r\n    <div\r\n      style={{\r\n        left: dimensions.offsetX,\r\n        width: dimensions.lengthPx,\r\n        height: LINE_THICKNESS,\r\n        top: dimensions.offsetY,\r\n        transformOrigin: model.transformOrigin,\r\n        transform: `rotate(${dimensions.rotationDeg}deg)`,\r\n        position: \"absolute\",\r\n      }}\r\n    >\r\n      <div\r\n        style={{\r\n          animationName: \"grow\",\r\n          opacity: LINE_OPACITY,\r\n          animationDuration: \"1s\",\r\n          animationTimingFunction: \"cubiz-bezier(0, 20, 50, 90)\",\r\n          background: theme.palette.background.paper,\r\n          height: LINE_THICKNESS,\r\n        }}\r\n      ></div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport interface LineComponentProps {\r\n  model: LineModel;\r\n  game: Game;\r\n}\r\n","import { getDirectionForCoords, getAngleForDirection } from \"./utils\";\r\nimport Coords from \"./Coords\";\r\nimport { Direction, coordsToString, dissectDirection } from \"./Direction\";\r\nimport log from \"./Log\";\r\nimport Game from \"./Game\";\r\nimport Cell from \"./Cell\";\r\nimport { decorate, computed, observable } from \"mobx\";\r\nimport { LINE_THICKNESS } from \"../components/LineComponent\";\r\n\r\nclass LineModel {\r\n  get transformOrigin(): string | number | undefined {\r\n    const dd = dissectDirection(this.direction);\r\n    return dd.isDiagonal || dd.isHorizontal\r\n      ? `0 50%`\r\n      : dd.isVertical\r\n      ? `0 100%`\r\n      : undefined;\r\n  }\r\n  get dimensions(): {\r\n    offsetX: number;\r\n    offsetY: number;\r\n    lengthPx: number;\r\n    rotationDeg: number;\r\n  } {\r\n    const dd = dissectDirection(this.direction);\r\n    const firstTd = this.firstCell!.tdRef!.current!;\r\n    const lastTd = this.lastCell!.tdRef!.current!;\r\n    const cellWidth = firstTd.offsetWidth;\r\n    const cellHeight = firstTd.offsetHeight;\r\n\r\n    let [offsetX, offsetY, lengthPx] = [0, 0, 0];\r\n    if (dd.isHorizontal) {\r\n      offsetY = firstTd.offsetTop + cellHeight / 2 - LINE_THICKNESS / 2;\r\n      if (dd.isRight) {\r\n        lengthPx =\r\n          Math.abs(firstTd.offsetLeft - lastTd.offsetLeft) + 0.5 * cellWidth;\r\n        offsetX = firstTd.offsetLeft + 0.25 * cellWidth;\r\n      } else {\r\n        lengthPx =\r\n          Math.abs(lastTd.offsetLeft - firstTd.offsetLeft) + 0.5 * cellWidth;\r\n        offsetX = firstTd.offsetLeft + 0.75 * cellWidth;\r\n      }\r\n    } else if (dd.isVertical) {\r\n      offsetX =\r\n        firstTd.offsetLeft +\r\n        cellWidth / 2 +\r\n        LINE_THICKNESS / (dd.isUp ? 2 : -2);\r\n      offsetY = firstTd.offsetTop + cellHeight * (dd.isDown ? 0.2 : 0.8) - LINE_THICKNESS;\r\n      const endY = lastTd.offsetTop + cellHeight * (dd.isUp ? 0.2 : 0.8) - LINE_THICKNESS;\r\n      lengthPx = Math.abs(endY - offsetY);\r\n    } else if (dd.isDiagonal) {\r\n      const endX = lastTd.offsetLeft + (dd.isLeft ? 0 : cellWidth);\r\n      const endY = lastTd.offsetTop + (dd.isUp ? 0 : cellHeight);\r\n      offsetX = firstTd.offsetLeft + (dd.isRight ? 0 : cellWidth);\r\n      offsetY = firstTd.offsetTop + (dd.isDown ? 0 : cellHeight);\r\n      lengthPx = Math.floor(\r\n        Math.sqrt(\r\n          // Pythagoras\r\n          Math.pow(Math.floor(endX - offsetX), 2) +\r\n            Math.pow(Math.ceil(endY - offsetY), 2)\r\n        )\r\n      );\r\n    } else throw new Error(\"Invalid direction\");\r\n    return {\r\n      offsetX,\r\n      offsetY,\r\n      lengthPx,\r\n      rotationDeg: getAngleForDirection(this.direction),\r\n    };\r\n  }\r\n  direction: Direction;\r\n  firstCell: Cell;\r\n  lastCell: Cell;\r\n  constructor(public coords: Coords[], private game: Game) {\r\n    this.direction = getDirectionForCoords(coords[0], coords[1]);\r\n    this.firstCell = this.game.cellAt(this.coords[0].x, this.coords[0].y)!;\r\n    this.lastCell = this.game.cellAt(\r\n      this.coords[this.coords.length - 1].x,\r\n      this.coords[this.coords.length - 1].y\r\n    )!;\r\n  }\r\n}\r\n\r\ndecorate(LineModel, {\r\n  firstCell: observable,\r\n  lastCell: observable,\r\n  direction: observable,\r\n  dimensions: computed,\r\n  transformOrigin: computed,\r\n});\r\n\r\nexport { LineModel };\r\n","import {\r\n  initialCellCoords,\r\n  getNextCoords,\r\n  sumUntilNotZero,\r\n  directionsOverlap,\r\n} from \"./utils\";\r\nimport Coords, { areCoordsEqual as coordsAreEqual } from \"./Coords\";\r\nimport { RowProps } from \"../components/Row\";\r\nimport { decorate, observable, computed, autorun } from \"mobx\";\r\nimport { allDirections, coordsToString, directionToString } from \"./Direction\";\r\nimport Cell from \"./Cell\";\r\nimport log, { LogLevel, decreaseLogLevel, setLogLevel } from \"../classes/Log\";\r\nimport { LineModel } from \"./Line\";\r\nimport { loadGame } from \"../App\";\r\n\r\nclass Game {\r\n  static readonly origo = { x: 0, y: 0 };\r\n  readonly lines = Array<LineModel>();\r\n  selectedCellCoords: Coords | undefined;\r\n  readonly cells = Array<Cell>();\r\n  get highlightedCoords(): Array<Coords> {\r\n    if (!this.selectedCellCoords) return [];\r\n    else\r\n      return this.possibleLines\r\n        .map((l) => l.coords)\r\n        .reduce((prev, curr) => prev.concat(curr), []);\r\n  }\r\n  get lineCount(): number {\r\n    return this.lines?.length || 0;\r\n  }\r\n  get endOfLineCoords(): Array<Coords> {\r\n    if (!this.selectedCellCoords) return [];\r\n    else return this.possibleLines.map((l) => l.coords[l.coords.length - 1]);\r\n  }\r\n  get rows() {\r\n    const rows = Array<RowProps>();\r\n    this.cells\r\n      .slice() // MobX\r\n      .sort((a, b) => a.coords.x - b.coords.x)\r\n      .slice()\r\n      .sort((a, b) => b.coords.y - a.coords.y) // Note: because Y axis decreases downwards, reverse this sorting.\r\n      .forEach((c) => {\r\n        const { y } = c.coords;\r\n        const row = rows.find((r) => r.yIndex === y);\r\n        if (!row) rows.push({ yIndex: y, cells: [c], game: this });\r\n        else row.cells.push(c);\r\n      });\r\n    return rows;\r\n  }\r\n  constructor() {\r\n    for (let y = 9; y >= -9; y = sumUntilNotZero(y, -1))\r\n      for (let x = -9; x <= 9; x = sumUntilNotZero(x, 1))\r\n        this.cells.push(new Cell({ x, y }));\r\n\r\n    this.initiateBoardAsync().then(() => {\r\n      let previousLineCount = 0;\r\n      autorun(() => {\r\n        // As {this.lines} is a MobX observable,\r\n        // * this will run each times the collection is updated.\r\n        if (previousLineCount > this.lines.length) {\r\n          // A line was deleted (Undo was requested)\r\n          // Close all dots\r\n          this.cells.forEach((c) => (c.isOpened = false));\r\n          // Re-open initial dots\r\n          this.initiateBoard();\r\n        }\r\n        this.lines.forEach(({ coords, direction }) => {\r\n          // Open each cell that has a line over them\r\n          coords.forEach(({ x, y }) => {\r\n            const cell = this.cellAt(x, y)!;\r\n            if (!cell.isOpened) cell.isOpened = true;\r\n            if (!cell.lineDirections.some((ld) => ld === direction)) {\r\n              cell.lineDirections.push(direction);\r\n              log.d(\r\n                \"Added direction (%o) to cell at %o\",\r\n                directionToString(direction),\r\n                coordsToString(cell!.coords)\r\n              );\r\n            }\r\n          });\r\n        });\r\n        previousLineCount = this.lines.length;\r\n      });\r\n    });\r\n  }\r\n  initiateBoard() {\r\n    for (const coord of initialCellCoords) {\r\n      this.cellAt(coord.x, coord.y)!.isOpened = true;\r\n    }\r\n  }\r\n  async initiateBoardAsync(animDelayMs: number = 8) {\r\n    for (const coord of initialCellCoords) {\r\n      await new Promise((r: any) =>\r\n        setTimeout(() => {\r\n          this.cellAt(coord.x, coord.y)!.isOpened = true;\r\n          r(true);\r\n        }, animDelayMs)\r\n      );\r\n    }\r\n  }\r\n  cellAt(x: number, y: number): Cell | undefined {\r\n    return this.cells.find((c) => c.coords.x === x && c.coords.y === y);\r\n  }\r\n  /**\r\n   * Get all lines that can be drawn from coords\r\n   * @param {Coords} coords The x and y positions of the cell (something within [-9...9])\r\n   */\r\n  get possibleLines(): LineModel[] {\r\n    const ll = log.MIN_LEVEL;\r\n    if (ll < LogLevel.Info) setLogLevel(LogLevel.Info); // skip debug logs for a while\r\n    const possibleLines = Array<LineModel>();\r\n    for (const direction of allDirections()) {\r\n      let { x, y } = this.selectedCellCoords!!;\r\n      let lineLength = 0;\r\n      let unopenedCells = 0;\r\n      let lineCoords = Array<Coords>();\r\n      for (let i = 0; i < 5; i++) {\r\n        lineCoords.push({ x, y });\r\n        const cell = this.cellAt(x, y);\r\n        if (!cell?.isOpened) unopenedCells++;\r\n        if (\r\n          !cell?.lineDirections?.some(\r\n            (ld) => ld === direction || directionsOverlap(ld, direction)\r\n          )\r\n        ) {\r\n          lineLength++;\r\n        }\r\n\r\n        let next = getNextCoords({ x, y }, direction);\r\n        x = next.x;\r\n        y = next.y;\r\n      }\r\n      if (lineLength === 5 && unopenedCells <= 1) {\r\n        const l = new LineModel(lineCoords, this);\r\n        log.i(\r\n          \"Possible line from coords %s to direction %s: %s\",\r\n          coordsToString({ x, y }),\r\n          directionToString(direction),\r\n          coordsToString(lineCoords)\r\n        );\r\n        possibleLines.push(l);\r\n      }\r\n    }\r\n    setLogLevel(ll);\r\n    return possibleLines;\r\n  }\r\n  tryCompleteLine(c2: Coords) {\r\n    const c1 = this.selectedCellCoords;\r\n    if (!c1) {\r\n      log.w(\"Could not complete line due to selected coords being falsy.\");\r\n      return;\r\n    } else {\r\n      log.i(\r\n        \"Attempting to complete line from %o to %o\",\r\n        coordsToString(c1),\r\n        coordsToString(c2)\r\n      );\r\n      const line = this.getLineForCoords(c1, c2)!;\r\n      for (const { x, y } of line.coords) {\r\n        const c = this.cellAt(x, y);\r\n        if (!c!.isOpened) {\r\n          c!.isOpened = true;\r\n          log.i(\"Opened cell at \", coordsToString(c!.coords));\r\n        }\r\n      }\r\n      this.lines.push(line);\r\n      log.d(\r\n        \"Added line at %s. Line count: %o.\",\r\n        coordsToString(line.coords),\r\n        this.lineCount\r\n      );\r\n      this.selectedCellCoords = undefined;\r\n      log.d(\"Reset selected cell coords.\");\r\n    }\r\n  }\r\n  getLineForCoords(c1: Coords, c2: Coords): LineModel | undefined {\r\n    return this.possibleLines.find((l) =>\r\n      l.coords.some((c) => coordsAreEqual(c, c2))\r\n    );\r\n  }\r\n}\r\n\r\nexport enum GameState {\r\n  NotStarted = 0,\r\n  Started,\r\n  Finished,\r\n}\r\n\r\ndecorate(Game, {\r\n  selectedCellCoords: observable,\r\n  highlightedCoords: computed,\r\n  endOfLineCoords: computed,\r\n  lines: observable,\r\n  rows: computed,\r\n  cells: observable,\r\n  lineCount: computed,\r\n});\r\n\r\nexport default Game;\r\n","export default interface Coords {\r\n  x: number;\r\n  y: number;\r\n}\r\n\r\nexport function areCoordsEqual(a: Coords, b: Coords) {\r\n  return a.x === b.x && a.y === b.y;\r\n}\r\n","import React, { CSSProperties } from \"react\";\r\nimport Coords from \"../classes/Coords\";\r\nimport { CELL_SIZE } from \"../classes/constants\";\r\nimport { observer } from \"mobx-react\";\r\nimport Game from \"../classes/Game\";\r\nimport { useThemeSelector } from \"../hooks/useThemeSelector\";\r\nimport { Theme } from \"@material-ui/core/styles\";\r\n\r\nfunction isCellSelected(props: CellComponentProps): boolean {\r\n  const selectedCellCoords = props.game?.selectedCellCoords;\r\n  return (\r\n    selectedCellCoords?.x === props.coords.x &&\r\n    selectedCellCoords?.y === props.coords.y\r\n  );\r\n}\r\nconst makeStyle = (\r\n  isSelected: Boolean,\r\n  isOpened: Boolean,\r\n  isHighlighted: Boolean,\r\n  isEndOfLine: Boolean,\r\n  theme: Theme\r\n): CSSProperties => {\r\n  return {\r\n    width: CELL_SIZE,\r\n    height: CELL_SIZE,\r\n    fontSize: isOpened || isSelected ? 14 : 12,\r\n    textAlign: \"center\",\r\n    color: isHighlighted\r\n      ? theme.palette.primary.dark\r\n      : theme.palette.primary.main,\r\n    backgroundColor: isEndOfLine\r\n      ? theme.palette.primary.light\r\n      : isSelected && !isHighlighted\r\n      ? theme.palette.error.light\r\n      : isSelected && isHighlighted\r\n      ? theme.palette.info.main\r\n      : isHighlighted\r\n      ? theme.palette.secondary.light\r\n      : \"#f9f9f9\",\r\n    backgroundSize: \"50%\",\r\n  };\r\n};\r\n\r\nexport const CellComponent = observer((props: CellComponentProps) => {\r\n  const tdRef = React.useRef<HTMLTableCellElement>(null);\r\n  const { game, coords } = props;\r\n  const { x, y } = props.coords;\r\n  const cell = props.game.cellAt(x, y);\r\n  const isHighlighted = props.game.highlightedCoords.some(\r\n    (c) => c.x === x && c.y === y\r\n  );\r\n  const isEndOfLine =\r\n    isHighlighted && game.endOfLineCoords.some((c) => c.x === x && c.y === y);\r\n  const { theme } = useThemeSelector();\r\n  React.useEffect(() => {\r\n    if (!!cell) cell.tdRef = tdRef;\r\n  }, [game, coords, x, y]);\r\n  return (\r\n    <td\r\n      ref={tdRef}\r\n      className={`noselect cell`}\r\n      style={makeStyle(\r\n        isCellSelected(props),\r\n        cell!.isOpened,\r\n        isHighlighted,\r\n        isEndOfLine,\r\n        theme\r\n      )}\r\n      onClick={() => {\r\n        if (\r\n          props.game.selectedCellCoords?.x === x &&\r\n          props.game.selectedCellCoords?.y === y\r\n        ) {\r\n          props.game.selectedCellCoords = undefined;\r\n        } else {\r\n          if (isHighlighted) props.game.tryCompleteLine(props.coords);\r\n          else props.game.selectedCellCoords = props.coords;\r\n        }\r\n      }}\r\n      data-coords={`[${x}, ${y}]`}\r\n    >\r\n      {cell!.isOpened || isCellSelected(props) ? <>&#9675;</> : <>&bull;</>}\r\n    </td>\r\n  );\r\n});\r\n\r\nexport interface CellComponentProps {\r\n  coords: Coords;\r\n  game: Game;\r\n}\r\n","import React from \"react\";\r\nimport { CellComponentProps, CellComponent } from \"./CellComponent\";\r\nimport Game from \"../classes/Game\";\r\nimport Cell from \"../classes/Cell\";\r\n\r\nexport const Row = (props: RowProps) => {\r\n  return (\r\n    <tr>\r\n      {props.cells.map((cell) => (\r\n        <CellComponent game={props.game} key={cell.coords.x} {...cell} />\r\n      ))}\r\n    </tr>\r\n  );\r\n};\r\n\r\nexport interface RowProps {\r\n  yIndex: number;\r\n  game: Game;\r\n  cells: Array<Cell>;\r\n}\r\n","import React, { HTMLProps } from \"react\";\r\nimport { useThemeSelector } from \"../hooks/useThemeSelector\";\r\n\r\nconst Flexbox = (props: HTMLProps<HTMLDivElement>) => {\r\n  const { theme } = useThemeSelector();\r\n  return (\r\n    <div\r\n      {...props}\r\n      style={{ display: \"flex\", color: theme.palette.text.primary, ...props.style }}\r\n    >\r\n      {props.children}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Flexbox;\r\n","import React from \"react\";\r\nimport Flexbox from \"./Flexbox\";\r\nimport { useThemeSelector } from \"../hooks/useThemeSelector\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Drawer from \"@material-ui/core/Drawer\";\r\nimport MenuIcon from \"@material-ui/icons/Menu\";\r\nimport MenuOpenIcon from \"@material-ui/icons/MenuOpen\";\r\nimport MenuList from \"@material-ui/core/MenuList\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ThemeSelector from \"./ThemeSelector\";\r\n\r\nconst Title = (props: {\r\n  isMenuOpen: boolean;\r\n  setIsMenuOpen: (is: boolean) => void;\r\n}) => {\r\n  const { theme } = useThemeSelector();\r\n  const { isMenuOpen, setIsMenuOpen } = props;\r\n  return (\r\n    <>\r\n      <Flexbox style={{ padding: \"10px 25px\" }}>\r\n        <Flexbox style={{ flexGrow: 1 }}>\r\n          <h1 style={{ color: theme.palette.text.primary, paddingBottom: 5 }}>\r\n            Linegame\r\n          </h1>\r\n        </Flexbox>\r\n        <Flexbox>\r\n          <IconButton onClick={() => setIsMenuOpen(!isMenuOpen)}>\r\n            {!isMenuOpen && <MenuIcon color=\"action\" />}\r\n            {isMenuOpen && <MenuOpenIcon />}\r\n          </IconButton>\r\n        </Flexbox>\r\n      </Flexbox>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Title;\r\n","import React from \"react\";\r\nimport Flexbox from \"./Flexbox\";\r\nimport { themes } from \"../mui-themes\";\r\nimport { useThemeSelector } from \"../hooks/useThemeSelector\";\r\n\r\nconst themeButtonStyle: React.CSSProperties = {\r\n  fontSize: \"140%\",\r\n  cursor: \"pointer\",\r\n  margin: \"-2px 2px 0 2px\",\r\n  display: \"flex\",\r\n  flexGrow: 1,\r\n};\r\n\r\nconst ThemeSelector = () => {\r\n  const { theme, setTheme } = useThemeSelector();\r\n  const currentThemeIndex = Object.values(themes).indexOf(theme);\r\n  const themeKeys = Object.keys(themes);\r\n  const setPreviousTheme = () => {\r\n    const previousKey =\r\n      themeKeys[\r\n        currentThemeIndex > 0 ? currentThemeIndex - 1 : themeKeys.length - 1\r\n      ];\r\n    setTheme(themes[previousKey]);\r\n  };\r\n  const setNextTheme = () => {\r\n    const previousKey =\r\n      themeKeys[\r\n        currentThemeIndex + 1 < themeKeys.length ? currentThemeIndex + 1 : 0\r\n      ];\r\n    setTheme(themes[previousKey]);\r\n  };\r\n  return (\r\n    <Flexbox\r\n      style={{\r\n        flexFlow: \"column\",\r\n        flexGrow: 1,\r\n      }}\r\n      onClick={(e: React.MouseEvent) => {\r\n        e.stopPropagation();\r\n      }}\r\n    >\r\n      <span\r\n        style={{\r\n          display: \"flex\",\r\n          flexGrow: 1,\r\n          fontSize: \"70%\",\r\n          opacity: 0.8,\r\n          paddingTop: 5,\r\n          textAlign: \"center\",\r\n          flexFlow: \"column\",\r\n          textIndent: -10,\r\n        }}\r\n      >\r\n        Theme\r\n      </span>\r\n      <Flexbox style={{ flexGrow: 1 }}>\r\n        <a\r\n          style={themeButtonStyle}\r\n          className=\"noselect\"\r\n          onClick={() => setPreviousTheme()}\r\n        >\r\n          &laquo;\r\n        </a>\r\n        <span style={{ flexGrow: 0, textAlign: \"center\" }}>\r\n          {Object.keys(themes)[Object.values(themes).indexOf(theme)]}\r\n        </span>\r\n        <a\r\n          style={{ ...themeButtonStyle, flexDirection: \"row-reverse\" }}\r\n          className=\"noselect\"\r\n          onClick={() => setNextTheme()}\r\n        >\r\n          &raquo;\r\n        </a>\r\n      </Flexbox>\r\n    </Flexbox>\r\n  );\r\n};\r\n\r\nexport default ThemeSelector;\r\n","import React from \"react\";\r\nimport Drawer from \"@material-ui/core/Drawer\";\r\nimport { observer } from \"mobx-react\";\r\nimport Game from \"../classes/Game\";\r\nimport Title from \"./Title\";\r\nimport MenuList from \"@material-ui/core/MenuList\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ThemeSelector from \"./ThemeSelector\";\r\nimport { useThemeSelector } from \"../hooks/useThemeSelector\";\r\nimport Flexbox from \"./Flexbox\";\r\nimport SaveGameIcon from \"@material-ui/icons/SaveTwoTone\";\r\nimport NewGameIcon from \"@material-ui/icons/NoteAddTwoTone\";\r\nimport LoadGameIcon from \"@material-ui/icons/RestorePageTwoTone\";\r\nimport InstructionsIcon from \"@material-ui/icons/InfoTwoTone\";\r\nimport { saveGame, newGame, loadGame } from \"../App\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport { Divider } from \"@material-ui/core\";\r\n\r\nconst MenuLinkItem = (props: {\r\n  onClick?: () => void;\r\n  icon?: JSX.Element;\r\n  text: string;\r\n  fontSize?: \"130%\" | \"100%\";\r\n}) => {\r\n  const { icon, onClick, text, fontSize } = props;\r\n  return (\r\n    <ListItem {...onClick} style={{ cursor: \"pointer\" }}>\r\n      <Button fullWidth>\r\n        <Flexbox style={{ width: \"70%\" }}>\r\n          <span\r\n            style={{ width: 40, marginRight: fontSize === \"100%\" ? 5 : 15 }}\r\n          >\r\n            {icon && icon}\r\n          </span>\r\n          <Typography\r\n            color=\"textPrimary\"\r\n            style={{ fontSize: fontSize || \"130%\", marginTop: 3 }}\r\n          >\r\n            {text}\r\n          </Typography>\r\n        </Flexbox>\r\n      </Button>\r\n    </ListItem>\r\n  );\r\n};\r\n\r\nconst Menu = observer((props: { game: Game }) => {\r\n  const [isMenuOpen, setIsMenuOpen] = React.useState(false);\r\n  const { theme } = useThemeSelector();\r\n  return (\r\n    <>\r\n      <Title {...{ isMenuOpen, setIsMenuOpen }} />\r\n      <Typography>Points: {props.game.lineCount}</Typography>\r\n      <Drawer\r\n        anchor=\"left\"\r\n        open={isMenuOpen}\r\n        onClose={() => setIsMenuOpen(false)}\r\n      >\r\n        <Flexbox\r\n          style={{\r\n            flexFlow: \"column\",\r\n            alignItems: \"center\",\r\n            overflow: \"hidden\",\r\n            height: \"100vh\",\r\n            backgroundColor: theme.palette.background.paper,\r\n          }}\r\n        >\r\n          <MenuList\r\n            style={{\r\n              marginTop: \"auto\",\r\n              marginBottom: \"auto\",\r\n              width: 300,\r\n              height: 550,\r\n              backgroundColor: theme.palette.background.paper,\r\n              color: \"#fff\",\r\n              textAlign: \"center\",\r\n            }}\r\n          >\r\n            <ListItem>\r\n              <ThemeSelector />\r\n            </ListItem>\r\n            <Divider style={{ margin: \"2px 10px\" }} />\r\n            <MenuLinkItem\r\n              text=\"New game\"\r\n              icon={<NewGameIcon fontSize=\"large\" />}\r\n              onClick={() => {\r\n                newGame();\r\n                setIsMenuOpen(false);\r\n              }}\r\n            />\r\n            <MenuLinkItem\r\n              text=\"Save game\"\r\n              icon={<SaveGameIcon fontSize=\"large\" />}\r\n              onClick={() => {\r\n                saveGame();\r\n                setIsMenuOpen(false);\r\n              }}\r\n            />\r\n            <MenuLinkItem\r\n              text=\"Load game\"\r\n              icon={\r\n                <LoadGameIcon\r\n                  fontSize=\"large\"\r\n                  onClick={() => {\r\n                    loadGame();\r\n                    setIsMenuOpen(false);\r\n                  }}\r\n                />\r\n              }\r\n            />\r\n            <Divider style={{ margin: \"2px 10px\" }} />\r\n            <MenuLinkItem\r\n              text=\"How to play?\"\r\n              fontSize=\"100%\"\r\n              icon={<InstructionsIcon fontSize=\"default\" onClick={() => {}} />}\r\n            />\r\n          </MenuList>\r\n        </Flexbox>\r\n      </Drawer>\r\n    </>\r\n  );\r\n});\r\n\r\nexport default Menu;\r\n","import React from \"react\";\r\nimport Game from \"./classes/Game\";\r\nimport { LineModel } from \"./classes/Line\";\r\nimport { Board } from \"./components/Board\";\r\nimport { decorate, observable } from \"mobx\";\r\nimport { observer } from \"mobx-react\";\r\nimport { LOCALSTORAGE_STATE_KEY } from \"./classes/constants\";\r\nimport { ThemeProvider } from \"@material-ui/core\";\r\nimport { themes } from \"./mui-themes\";\r\nimport { useThemeSelector } from \"./hooks/useThemeSelector\";\r\n\r\n/** Because React will not re-render by default if the 'game' object\r\n * changes, use MobX to strongly bind it.\r\n * */\r\nclass GameWrapper {\r\n  game: Game = new Game();\r\n}\r\ndecorate(GameWrapper, {\r\n  game: observable,\r\n});\r\nconst gameWrapper = new GameWrapper();\r\n\r\n/** Rendering root for React */\r\nconst App = observer(() => {\r\n  const { theme } = useThemeSelector();\r\n  React.useEffect(() => {\r\n    console.log(\r\n      \"Theme was changed to\",\r\n      Object.keys(themes)[Object.values(themes).indexOf(theme)]\r\n    );\r\n  }, [theme]);\r\n  return (\r\n    <ThemeProvider theme={theme}>\r\n      <Board game={gameWrapper.game} />\r\n    </ThemeProvider>\r\n  );\r\n});\r\n\r\n/** Starts a new game\r\n * TODO: Maybe this should save the new game into Local?\r\n * TODO: Maybe this should end the previous game and display score/end?\r\n */\r\nexport function newGame(): void {\r\n  gameWrapper.game = new Game();\r\n}\r\n\r\n/** Save the current line state to Local.\r\n * Only the lines matter. The game has no other saveable states.\r\n */\r\nexport function saveGame(): void {\r\n  const linesJson = JSON.stringify(gameWrapper.game.lines);\r\n  localStorage.setItem(LOCALSTORAGE_STATE_KEY, linesJson);\r\n}\r\n\r\n/** @returns Promise. Resolved true if a game was loaded successfully - false if not. */\r\nexport async function loadGame(): Promise<Boolean> {\r\n  // Load the saved state from local\r\n  const linesJson = localStorage.getItem(LOCALSTORAGE_STATE_KEY);\r\n  if (!!linesJson) {\r\n    // Try-catch could be replaced by a versioning system. CBA.\r\n    try {\r\n      const lines = JSON.parse(linesJson) as LineModel[];\r\n      // Delete all previous lines\r\n      gameWrapper.game.lines.splice(0, gameWrapper.game.lines.length);\r\n      gameWrapper.game = new Game();\r\n      // Add the saved lines to the game\r\n      lines.forEach((l) => {\r\n        l = new LineModel(l.coords, gameWrapper.game); // Copy object, otherwise the getter for Direction will not work.\r\n        gameWrapper.game.lines.push(l);\r\n      });\r\n      return true;\r\n    } catch (e) {\r\n      return false;\r\n    }\r\n  }\r\n  return false;\r\n}\r\n\r\nexport default App;\r\n","import React, { CSSProperties } from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport Game from \"../classes/Game\";\r\nimport { LineModel } from \"../classes/Line\";\r\nimport { LineComponent } from \"./LineComponent\";\r\nimport { useWindowSize } from \"../hooks/useWindowSize\";\r\nlet updateCallback = () => {};\r\nexport const updateOverlay = () => updateCallback();\r\nexport const LineOverlayComponent = observer(\r\n  (props: LineOverlayComponentProps) => {\r\n    const { game, tableRef } = props;\r\n    const { lines } = game;\r\n    const [style, setStyle] = React.useState<CSSProperties>({});\r\n    const windowSize = useWindowSize();\r\n    const [updateId, setUpdateId] = React.useState(0);\r\n    updateCallback = () => setUpdateId(updateId + 1);\r\n    React.useEffect(() => {\r\n      setStyle({\r\n        width: tableRef?.current?.offsetWidth,\r\n        height: tableRef?.current?.clientHeight,\r\n        left: tableRef?.current?.offsetLeft,\r\n        top: tableRef?.current?.offsetTop,\r\n      });\r\n      console.log(\"set style\");\r\n    }, [tableRef, tableRef.current, windowSize, updateId]);\r\n    return (\r\n      <div\r\n        style={{\r\n          position: \"absolute\",\r\n          background: \"rgba(45,91,0,0.15)\",\r\n          top: 0,\r\n          left: 0,\r\n          pointerEvents: \"none\",\r\n          ...style,\r\n        }}\r\n      >\r\n        {Array.isArray(lines) &&\r\n          lines.map((l, i) => (\r\n            <LineComponent key={`line-${i}`} model={l} game={game} />\r\n          ))}\r\n      </div>\r\n    );\r\n  }\r\n);\r\n\r\nexport interface LineOverlayComponentProps {\r\n  game: Game;\r\n  tableRef: React.RefObject<HTMLTableElement>;\r\n}\r\n","import { useState, useEffect } from \"react\";\r\n\r\nexport function useWindowSize() {\r\n  const isClient = typeof window === \"object\";\r\n\r\n  function getSize() {\r\n    return {\r\n      width: isClient ? window.innerWidth : undefined,\r\n\r\n      height: isClient ? window.innerHeight : undefined,\r\n    };\r\n  }\r\n\r\n  const [windowSize, setWindowSize] = useState(getSize);\r\n\r\n  useEffect(() => {\r\n    if (!isClient) {\r\n      return;\r\n    }\r\n\r\n    function handleResize() {\r\n      setWindowSize(getSize());\r\n    }\r\n\r\n    window.addEventListener(\"resize\", handleResize);\r\n\r\n    return () => window.removeEventListener(\"resize\", handleResize);\r\n  }, []); // Empty array ensures that effect is only run on mount and unmount\r\n\r\n  return windowSize;\r\n}\r\n","import React, { CSSProperties } from \"react\";\r\nimport Game from \"../classes/Game\";\r\nimport { initialGameGrid } from \"../classes/utils\";\r\nimport { CellComponent } from \"./CellComponent\";\r\nimport { BOARD_MATRIX_SIZE, CELL_SIZE } from \"../classes/constants\";\r\nimport { Row } from \"./Row\";\r\nimport { autorun } from \"mobx\";\r\nimport { observer } from \"mobx-react\";\r\nimport Menu from \"./Menu\";\r\nimport { LineOverlayComponent } from \"./LineOverlay\";\r\nimport { useThemeSelector } from \"../hooks/useThemeSelector\";\r\nimport Flexbox from \"./Flexbox\";\r\n\r\nconst style: CSSProperties = {\r\n  width: BOARD_MATRIX_SIZE * CELL_SIZE,\r\n  margin: \"auto\",\r\n};\r\n\r\nexport const Board = observer((props: { game: Game }) => {\r\n  const { game } = props;\r\n  const tableRef = React.useRef<HTMLTableElement>(null);\r\n  const { theme } = useThemeSelector();\r\n  return (\r\n    <Flexbox\r\n      style={{\r\n        background: theme.palette.background.default,\r\n        margin: \"auto\",\r\n        justifyContent: \"center\",\r\n        flexFlow: \"column\",\r\n        border: `1px solid ${theme.palette.primary.main}`,\r\n      }}\r\n    >\r\n      <Flexbox\r\n        style={{\r\n          flexFlow: \"column\",\r\n          margin: \"auto\",\r\n          padding: 5,\r\n          borderRadius: theme.spacing(1),\r\n          background: theme.palette.background.paper,\r\n        }}\r\n      >\r\n        <Menu game={game} />\r\n        <table ref={tableRef} cellSpacing={1} style={style}>\r\n          <tbody>\r\n            {game.rows.map((row) => (\r\n              <Row game={game} key={row.yIndex} {...row} />\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n        <LineOverlayComponent game={game} tableRef={tableRef} />\r\n      </Flexbox>\r\n    </Flexbox>\r\n  );\r\n});\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./reset.css\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(\n  <React.StrictMode>\n      <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}