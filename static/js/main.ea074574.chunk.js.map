{"version":3,"sources":["classes/Direction.ts","classes/constants.ts","classes/Log.ts","classes/utils.ts","classes/Cell.ts","mui-themes.ts","hooks/useThemeSelector.ts","components/LineComponent.tsx","classes/LineModel.ts","hooks/useWindowSize.ts","components/LineOverlay.tsx","classes/Game.ts","classes/Coords.ts","components/CellComponent.tsx","components/Row.tsx","components/Flexbox.tsx","components/Title.tsx","components/ThemeSelector.tsx","components/Menu.tsx","App.tsx","components/HowToPlay.tsx","components/Board.tsx","serviceWorker.ts","index.tsx","img/line_example.png","img/possible_lines_example.png"],"names":["Direction","dissectDirection","d","isRight","Right","isLeft","Left","isDown","Down","isUp","Up","isDiagonal","isHorizontal","isVertical","directionToString","dir","coordsToString","c","coordToString","x","y","Array","isArray","map","join","LogLevel","log","MIN_LEVEL","Debug","label","console","groupCollapsed","groupEnd","message","this","Verbose","optionalParams","debug","None","Info","info","Warning","warn","error","setLogLevel","level","initialCellCoords","coords","directions","concat","fill","forEach","push","isRtl","isLtr","isUtd","isDtu","getAngleForDirection","dd","NaN","directionsOverlap","d1","d2","dir1","dir2","getNextCoords","direction","sumUntilNotZero","a","sumToAdd","grid","xs","ys","startX","Math","min","endX","max","startY","endY","i","j","some","Cell","isOpened","tdRef","lineDirections","prototype","toString","decorate","observable","createTheme","colors","createMuiTheme","palette","primary","main","darkest","action","active","lightest","disabled","color2","secondary","color3","success","warning","background","default","paper","text","divider","typography","allVariants","color","fontFamily","button","textTransform","body1","themes","Default","init","theme","Object","keys","setTheme","useThemeSelector","singletonHook","React","useState","useEffect","values","indexOf","LineComponent","observer","props","model","dimensions","style","left","offsetX","width","lengthPx","height","top","offsetY","transformOrigin","transform","rotationDeg","position","animationName","opacity","animationDuration","animationTimingFunction","LineModel","game","firstCell","lastCell","c1","c2","getDirectionForCoords","cellAt","length","undefined","firstTd","current","lastTd","cellWidth","offsetWidth","cellHeight","offsetHeight","offsetTop","LINE_THICKNESS","abs","offsetLeft","Error","floor","sqrt","pow","ceil","computed","useWindowSize","isClient","window","getSize","innerWidth","innerHeight","windowSize","setWindowSize","addEventListener","handleResize","removeEventListener","GameState","updateCallback","updateOverlay","LineOverlayComponent","tableRef","lines","setStyle","updateId","setUpdateId","clientHeight","pointerEvents","l","key","Game","selectedCellCoords","cells","initiateBoardAsync","then","previousLineCount","autorun","initiateBoard","cell","ld","possibleLines","reduce","prev","curr","rows","slice","sort","b","row","find","r","yIndex","coord","animDelayMs","Promise","setTimeout","line","getLineForCoords","lineCount","w","ll","lineLength","unopenedCells","lineCoords","next","origo","highlightedCoords","endOfLineCoords","isCellSelected","CellComponent","useRef","cellSize","isHighlighted","isEndOfLine","isSelected","ref","className","Color","dark","darken","hex","fontSize","fontWeight","backgroundColor","light","onClick","tryCompleteLine","data-coords","Row","Flexbox","display","children","Title","isMenuOpen","setIsMenuOpen","padding","flexGrow","paddingBottom","IconButton","themeButtonStyle","cursor","margin","ThemeSelector","currentThemeIndex","themeKeys","flexFlow","e","stopPropagation","paddingTop","textAlign","textIndent","previousKey","setPreviousTheme","flexDirection","setNextTheme","MenuLinkItem","icon","ListItem","Button","fullWidth","marginRight","Typography","marginTop","Menu","pop","Drawer","anchor","open","onClose","alignItems","overflow","MenuList","marginBottom","Divider","gameWrapper","linesJson","JSON","stringify","localStorage","setItem","saveGame","loadGame","isSuccess","openHowToPlay","P","variant","HowToPlay","isOpen","Dialog","TransitionComponent","forwardRef","Slide","Paper","Grid","container","src","line_example","possible_lines_example","Board","sizeConstraint","isHowToPlayOpen","setIsHowToPlayOpen","justifyContent","border","borderRadius","spacing","cellSpacing","GameWrapper","resolve","getItem","parse","App","ThemeProvider","Boolean","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","module","exports"],"mappings":"qGAEYA,E,uGAQL,SAASC,EAAiBC,GAAe,IACvCC,GACJD,EAAIF,EAAUI,SAAWJ,EAAUI,MADtBC,GAEbH,EAAIF,EAAUM,QAAUN,EAAUM,KAFbC,GAGrBL,EAAIF,EAAUQ,QAAUR,EAAUQ,KAHLC,GAI7BP,EAAIF,EAAUU,MAAQV,EAAUU,GAEnC,MAAO,CACLP,UACAE,SACAE,SACAE,OACAE,YAAaF,GAAQF,KAAYJ,GAAWE,GAC5CO,cAAeT,GAAWE,MAAaI,GAAQF,GAC/CM,YAAaJ,GAAQF,MAAaJ,GAAWE,IAI1C,SAASS,EAAkBZ,GAChC,IAAMa,EAAMd,EAAiBC,GAC7B,OACGa,EAAIN,KAAO,KAAO,KAClBM,EAAIR,OAAS,OAAS,KACtBQ,EAAIZ,QAAU,QAAU,KACxBY,EAAIV,OAAS,OAAS,IAIpB,SAASW,EAAeC,GAC7B,IAAMC,EAAgB,SAACD,GACrB,MAAM,IAAN,OAAWA,EAAEE,EAAb,aAAmBF,EAAEG,EAArB,MAEF,OAAOC,MAAMC,QAAQL,GAAd,WACCA,EAAEM,IAAIL,GAAeM,KAAK,MAD3B,KAEHN,EAAcD,I,SA1CRjB,O,eAAAA,I,iBAAAA,I,eAAAA,I,eAAAA,I,YAAAA,M,KCFL,ICEKyB,G,SAAAA,O,eAAAA,I,qBAAAA,I,iBAAAA,I,eAAAA,I,qBAAAA,I,kBAAAA,M,SA6CNC,EAAM,I,iDAnCVC,UAAYF,EAASG,M,kDAKfC,GACJC,QAAQC,eAAeF,K,iCAGvBC,QAAQE,a,wBAERC,GACA,GAAIC,KAAKP,WAAaF,EAASU,QAAS,KAAC,IAAD,qBADtBC,EACsB,iCADtBA,EACsB,mBACtC,EAAAN,SAAQO,MAAR,SAAcJ,GAAd,OAA0BG,O,wBAG5BH,GACA,GAAIC,KAAKP,YAAcF,EAASa,MAAQJ,KAAKP,WAAaF,EAASG,MAAO,KAAC,IAAD,qBADxDQ,EACwD,iCADxDA,EACwD,mBACxE,EAAAN,SAAQO,MAAR,SAAcJ,GAAd,OAA0BG,O,wBAG5BH,GAAyC,IAAC,IAAD,qBAAvBG,EAAuB,iCAAvBA,EAAuB,kBACrCF,KAAKP,YAAcF,EAASa,MAAQJ,KAAKP,WAAaF,EAASc,OACjE,EAAAT,SAAQU,KAAR,SAAaP,GAAb,OAAyBG,M,wBAE3BH,GAAyC,IAAC,IAAD,qBAAvBG,EAAuB,iCAAvBA,EAAuB,kBACrCF,KAAKP,YAAcF,EAASa,MAAQJ,KAAKP,WAAaF,EAASgB,UACjE,EAAAX,SAAQY,KAAR,SAAaT,GAAb,OAAyBG,M,wBAE3BH,GAAyC,IAAC,IAAD,qBAAvBG,EAAuB,iCAAvBA,EAAuB,kBACrCF,KAAKP,YAAcF,EAASa,OAC9B,EAAAR,SAAQa,MAAR,SAAcV,GAAd,OAA0BG,M,+BA5B5B,OAAOX,EAASS,KAAKP,e,MAuClB,SAASiB,EAAYC,GAC1BnB,EAAIC,UAAYkB,EAGHnB,QCrDFoB,EAAoC,WAC/C,IAAMC,EAAS1B,QACT2B,EAA+B3B,QAAQ4B,OAC3C5B,MAAM,GAAG6B,KAAKlD,EAAUI,OACxBiB,MAAM,GAAG6B,KAAKlD,EAAUQ,MACxBa,MAAM,GAAG6B,KAAKlD,EAAUI,OACxBiB,MAAM,GAAG6B,KAAKlD,EAAUQ,MACxBa,MAAM,GAAG6B,KAAKlD,EAAUM,MACxBe,MAAM,GAAG6B,KAAKlD,EAAUQ,MACxBa,MAAM,GAAG6B,KAAKlD,EAAUM,MACxBe,MAAM,GAAG6B,KAAKlD,EAAUU,IACxBW,MAAM,GAAG6B,KAAKlD,EAAUM,MACxBe,MAAM,GAAG6B,KAAKlD,EAAUU,IACxBW,MAAM,GAAG6B,KAAKlD,EAAUI,OACxBiB,MAAM,GAAG6B,KAAKlD,EAAUU,KAEtBS,GAAK,EACLC,GAAK,EA4BT,OA3BA4B,EAAWG,SAAQ,SAACjD,GAClB6C,EAAOK,KAAK,CAAEjC,IAAGC,MADO,MAOpBnB,EAAiBC,GAJXmD,EAHc,EAGtBhD,OACSiD,EAJa,EAItBnD,QACQoD,EALc,EAKtBhD,OACMiD,EANgB,EAMtB/C,KAEFU,EAAImC,EACAnC,EAAI,IAAM,EACR,EACAA,EAAI,EACNkC,EACAlC,EAAI,IAAM,GACP,EACDA,EAAI,EACNA,EACJC,EAAImC,EACAnC,EAAI,IAAM,EACR,EACAA,EAAI,EACNoC,EACApC,EAAI,IAAM,GACP,EACDA,EAAI,EACNA,KAEC2B,EA7CwC,GAgD1C,SAASU,EAAqBvD,GACnC,IAAMwD,EAAKzD,EAAiBC,GAC5B,OAAOwD,EAAG9C,cAAgB8C,EAAGvD,QACzB,EACAuD,EAAGvD,SAAWuD,EAAGnD,OACjB,GACAmD,EAAG7C,YAAc6C,EAAGnD,OACpB,GACAmD,EAAGrD,QAAUqD,EAAGnD,OAChB,IACAmD,EAAG9C,cAAgB8C,EAAGrD,OACtB,IACAqD,EAAGrD,QAAUqD,EAAGjD,KAChB,IACAiD,EAAG7C,YAAc6C,EAAGjD,KACpB,IACAiD,EAAGvD,SAAWuD,EAAGjD,KACjB,IACAkD,IAYC,SAASC,EAAkBC,EAAeC,GAC/C,GAAID,IAAOC,EAAI,OAAO,EADiD,MAElD,CAAC7D,EAAiB4D,GAAK5D,EAAiB6D,IAAtDC,EAFgE,KAE1DC,EAF0D,KAIvE,SAAOD,EAAKlD,aAAcmD,EAAKnD,iBAE3BkD,EAAKnD,eAAgBoD,EAAKpD,mBAE1BmD,EAAK5D,SAAW4D,EAAKtD,MAAQuD,EAAK3D,QAAU2D,EAAKzD,aAEjDyD,EAAK7D,SAAW6D,EAAKvD,MAAQsD,EAAK1D,QAAU0D,EAAKxD,aAEjDwD,EAAK1D,QAAU0D,EAAKtD,MAAQuD,EAAK7D,SAAW6D,EAAKzD,YAEjDyD,EAAK3D,QAAU2D,EAAKvD,MAAQsD,EAAK5D,SAAW4D,EAAKxD,YAwChD,SAAS0D,EAAclB,EAAgBmB,GAC5C,IAAMhE,EAAID,EAAiBiE,GACrB/C,EAAS4B,EAAT5B,EAAGC,EAAM2B,EAAN3B,EAWT,OAVIlB,EAAEO,OAAMW,EAAI+C,EAAgB/C,EAAG,IAC/BlB,EAAEK,SAAQa,EAAI+C,EAAgB/C,GAAI,IAClClB,EAAEC,UAASgB,EAAIgD,EAAgBhD,EAAG,IAClCjB,EAAEG,SAAQc,EAAIgD,EAAgBhD,GAAI,IAO/B,CAAEA,IAAGC,KAGP,SAAS+C,EAAgBC,EAAWC,GACzC,OAAOD,EAAIC,IAAa,EACpBF,EAAgBC,EAAIC,EAAUA,GAC9BD,EAAIC,GAGsB,WAC9B,IAAMC,EAAI,YAAOxB,GAEXyB,EAAKD,EAAK/C,KAAI,gBAAGJ,EAAH,EAAGA,EAAH,EAAMC,EAAN,OAAcD,KAC5BqD,EAAKF,EAAK/C,KAAI,cAAGJ,EAAH,SAAMC,KACnBqD,EACLC,KAAKC,IAAL,MAAAD,KAAI,YAAQH,IAJE,EAGDK,EAEbF,KAAKG,IAAL,MAAAH,KAAI,YAAQH,IALE,EAGKO,EAGnBJ,KAAKC,IAAL,MAAAD,KAAI,YAAQF,IANE,EAGaO,EAI3BL,KAAKG,IAAL,MAAAH,KAAI,YAAQF,IAPE,EAShB1C,QAAQO,MACN,8CACAoC,EACAK,EACAF,EACAG,GAEF,IAlBmD,eAkB1CC,GACP,IAnBiD,eAmBxCC,GACFX,EAAKY,MAAK,gBAAG/D,EAAH,EAAGA,EAAGC,EAAN,EAAMA,EAAN,OAAcD,IAAM6D,GAAK5D,IAAM6D,MAC5CX,EAAKlB,KAAK,CAAEjC,EAAG6D,EAAG5D,EAAG6D,KAFhBA,EAAIH,EAAQG,EAAIF,EAAME,IAA/B,EAASA,IADFD,EAAIP,EAAQO,EAAIJ,EAAMI,IAA/B,EAASA,GAlBqB,G,WC3J1BG,EAIJ,WAA4BpC,GAAiB,yBAAjBA,SAAgB,KAH5CqC,UAAW,EAGiC,KAF5CC,WAE4C,OADnCC,eAAiBjE,SAI5B8D,EAAKI,UAAUC,SAAW,WACxB,MAAM,GAAN,OAAUtD,KAAKkD,SAAW,SAAW,SAArC,iBAAsDpE,EACpDkB,KAAKa,QADP,iBAEUb,KAAKoD,eAAe/D,KAAI,SAACrB,GAAD,OAAOY,EAAkBZ,MAAIsB,KAAK,MAFpE,MAKFiE,YAASN,EAAM,CACbC,SAAUM,IACVJ,eAAgBI,IAChBL,MAAOK,MAGMP,Q,wBCrBTQ,EAAc,SAACC,GAAD,OAMlBC,YAAe,CACbC,QAAS,CACPC,QAAS,CACPC,KAAMJ,EAAOK,SAEfC,OAAQ,CACNC,OAAQP,EAAOQ,SACfC,SAAUT,EAAOU,QAEnBC,UAAW,CAAEP,KAAMJ,EAAOY,QAC1BC,QAAS,CAAET,KAAMJ,EAAOQ,UACxB5D,KAAM,CAAEwD,KAAMJ,EAAOU,QACrBI,QAAS,CAAEV,KAAMJ,EAAOY,QACxBG,WAAY,CACVC,QAAShB,EAAOK,QAChBY,MAAOjB,EAAOY,QAEhBM,KAAM,CACJf,QAASH,EAAOQ,SAChBG,UAAWX,EAAOQ,UAEpBW,QAASnB,EAAOQ,UAElBY,WAAY,CACVC,YAAa,CACXC,MAAOtB,EAAOQ,SACde,WACE,sEAEJC,OAAQ,CACNC,cAAe,QAEjBC,MAAO,CACLJ,MAAOtB,EAAOQ,cAKTmB,EAAkC,CAC7CC,QAAS7B,EAAY,CACnBS,SAAU,UACVE,OAAQ,UACRE,OAAQ,UACRP,QAAS,YAEX,eAAgBN,EAAY,CAC1BS,SAAU,UACVE,OAAQ,UACRE,OAAQ,UACRP,QAAS,YAEX,UAAaN,EAAY,CACvBS,SAAU,UACVE,OAAQ,UACRE,OAAQ,UACRP,QAAS,YAEX,WAAcN,EAAY,CACxBS,SAAU,UACVE,OAAQ,UACRE,OAAQ,UACRP,QAAS,YAEX,UAAaN,EAAY,CACvBS,SAAU,UACVE,OAAQ,UACRE,OAAQ,UACRP,QAAS,a,QCtEPwB,EAAO,CACXC,MAAOH,EAAOI,OAAOC,KAAKL,GAAQ,IAClCM,SAAU,cAkBL,IAAMC,EAAmBC,YAAcN,GAf9C,WAAiC,IAAD,EACJO,IAAMC,SAAgBR,EAAKC,OADvB,mBACvBA,EADuB,KAChBG,EADgB,KAS9B,OAPAG,IAAME,WAAU,WACdpG,QAAQJ,IACN,yCACAiG,OAAOC,KAAKL,GAAQI,OAAOQ,OAAOZ,GAAQa,QAAQV,OAEnD,CAACA,IAEG,CACLA,QACAG,eCbSQ,EAAgBC,aAAS,SAACC,GAA+B,IAC5DC,EAAUD,EAAVC,MACAC,EAAeD,EAAfC,WACAf,EAAUI,IAAVJ,MAER,OACE,qCACIe,GAAc,qCACfA,GACC,yBACEC,MAAO,CACLC,KAAI,OAAEF,QAAF,IAAEA,OAAF,EAAEA,EAAYG,QAClBC,MAAK,OAAEJ,QAAF,IAAEA,OAAF,EAAEA,EAAYK,SACnBC,OAfkB,EAgBlBC,IAAG,OAAEP,QAAF,IAAEA,OAAF,EAAEA,EAAYQ,QACjBC,gBAAiBV,EAAMU,gBACvBC,UAAU,UAAD,cAAYV,QAAZ,IAAYA,OAAZ,EAAYA,EAAYW,YAAxB,QACTC,SAAU,aAGZ,yBACEX,MAAO,CACLY,cAAe,OACfC,QAxBO,IAyBPC,kBAAmB,KACnBC,wBAAyB,8BACzB9C,WAAYe,EAAM5B,QAAQa,WAAWE,MACrCkC,OA7BgB,UCGxBW,E,WAuEJ,WAAmB3G,EAA0B4G,GAAa,yBAAvC5G,SAAsC,KAAZ4G,OAAY,KAHzDzF,eAGyD,OAFzD0F,eAEyD,OADzDC,cACyD,EACvD3H,KAAKgC,ULPF,SAA+B4F,EAAYC,GAChD,IAAI7J,EAAIF,EAAUsC,KAKlB,OAJIwH,EAAG3I,EAAI4I,EAAG5I,EAAGjB,GAAKF,EAAUI,MACvB0J,EAAG3I,EAAI4I,EAAG5I,IAAGjB,GAAKF,EAAUM,MACjCwJ,EAAG1I,EAAI2I,EAAG3I,EAAGlB,GAAKF,EAAUU,GACvBoJ,EAAG1I,EAAI2I,EAAG3I,IAAGlB,GAAKF,EAAUQ,MAC9BN,EKCY8J,CAAsBjH,EAAO,GAAIA,EAAO,IACzDb,KAAK0H,UAAY1H,KAAKyH,KAAKM,OAAO/H,KAAKa,OAAO,GAAG5B,EAAGe,KAAKa,OAAO,GAAG3B,GACnEc,KAAK2H,SAAW3H,KAAKyH,KAAKM,OACxB/H,KAAKa,OAAOb,KAAKa,OAAOmH,OAAS,GAAG/I,EACpCe,KAAKa,OAAOb,KAAKa,OAAOmH,OAAS,GAAG9I,G,4DA1EtC,IAAMsC,EAAKzD,EAAiBiC,KAAKgC,WACjC,OAAOR,EAAG/C,YAAc+C,EAAG9C,aAApB,QAEH8C,EAAG7C,WAAH,cAEAsJ,I,iCASS,IAAD,IACZ,IAAI,UAACjI,KAAK0H,iBAAN,aAAC,EAAgBvE,SAAS,UAACnD,KAAK2H,gBAAN,aAAC,EAAexE,OAA9C,CACA,IAAM3B,EAAKzD,EAAiBiC,KAAKgC,WAC3BkG,EAAUlI,KAAK0H,UAAWvE,MAAOgF,QACjCC,EAASpI,KAAK2H,SAAUxE,MAAOgF,QAC/BE,EAAYH,EAAQI,YACpBC,EAAaL,EAAQM,aAEtB9B,EAA+B,EAAtBK,EAAyB,EAAhBH,EAAmB,EAC1C,GAAIpF,EAAG9C,aACLqI,EAAUmB,EAAQO,UAAYF,EAAa,EAAIG,IAC3ClH,EAAGvD,SACL2I,EACEpE,KAAKmG,IAAIT,EAAQU,WAAaR,EAAOQ,YAAc,GAAMP,EAC3D3B,EAAUwB,EAAQU,WAAa,IAAOP,IAEtCzB,EACEpE,KAAKmG,IAAIP,EAAOQ,WAAaV,EAAQU,YAAc,GAAMP,EAC3D3B,EAAUwB,EAAQU,WAAa,IAAOP,QAEnC,GAAI7G,EAAG7C,WAAY,CACxB+H,EACEwB,EAAQU,WACRP,EAAY,ED1CU,GC2CJ7G,EAAGjD,KAAO,GAAK,GACnCwI,EACEmB,EAAQO,UACRF,GAAc/G,EAAGnD,OAAS,GAAM,ID9CV,ECgDxB,IAAMwE,EACJuF,EAAOK,UAAYF,GAAc/G,EAAGjD,KAAO,GAAM,IDjD3B,ECkDxBqI,EAAWpE,KAAKmG,IAAI9F,EAAOkE,OACtB,KAAIvF,EAAG/C,WAYP,MAAM,IAAIoK,MAAM,qBAXrB,IAAMnG,EAAO0F,EAAOQ,YAAcpH,EAAGrD,OAAS,EAAIkK,GAC5CxF,EAAOuF,EAAOK,WAAajH,EAAGjD,KAAO,EAAIgK,GAC/C7B,EAAUwB,EAAQU,YAAcpH,EAAGvD,QAAU,EAAIoK,GACjDtB,EAAUmB,EAAQO,WAAajH,EAAGnD,OAAS,EAAIkK,GAC/C3B,EAAWpE,KAAKsG,MACdtG,KAAKuG,KAEHvG,KAAKwG,IAAIxG,KAAKsG,MAAMpG,EAAOgE,GAAU,GACnClE,KAAKwG,IAAIxG,KAAKyG,KAAKpG,EAAOkE,GAAU,KAI5C,MAAO,CACLL,UACAK,UACAH,WACAM,YAAa3F,EAAqBvB,KAAKgC,iB,KAgB7CuB,YAASiE,EAAW,CAClBE,UAAWlE,IACXmE,SAAUnE,IACVxB,UAAWwB,IACX+C,WAAY2C,IACZlC,gBAAiBkC,M,YC7FZ,SAASC,IACd,IAAMC,EAA6B,kBAAXC,OAExB,SAASC,IACP,MAAO,CACL3C,MAAOyC,EAAWC,OAAOE,gBAAatB,EAEtCpB,OAAQuC,EAAWC,OAAOG,iBAAcvB,GAPd,MAWMlC,mBAASuD,GAXf,mBAWvBG,EAXuB,KAWXC,EAXW,KA2B9B,OAdA1D,qBAAU,WACR,GAAKoD,EAUL,OAFAC,OAAOM,iBAAiB,SAAUC,GAE3B,kBAAMP,OAAOQ,oBAAoB,SAAUD,IANlD,SAASA,IACPF,EAAcJ,QAMf,IAEIG,ECvBT,ICkLYK,EDlLRC,EAAiB,aACRC,EAAgB,kBAAMD,KACtBE,EAAuB7D,aAClC,SAACC,GAAsC,IAC7BoB,EAAmBpB,EAAnBoB,KAAMyC,EAAa7D,EAAb6D,SACNC,EAAU1C,EAAV0C,MAF4B,EAGVrE,IAAMC,SAAwB,IAHpB,mBAG7BS,EAH6B,KAGtB4D,EAHsB,KAI9BX,EAAaN,IAJiB,EAKJrD,IAAMC,SAAS,GALX,mBAK7BsE,EAL6B,KAKnBC,EALmB,KAgBpC,OAVAP,EAAiB,kBAAMO,EAAYD,EAAW,IAC9CvE,IAAME,WAAU,WAAO,IAAD,QACpBoE,EAAS,CACPzD,MAAK,OAAEuD,QAAF,IAAEA,GAAF,UAAEA,EAAU/B,eAAZ,aAAE,EAAmBG,YAC1BzB,OAAM,OAAEqD,QAAF,IAAEA,GAAF,UAAEA,EAAU/B,eAAZ,aAAE,EAAmBoC,aAC3B9D,KAAI,OAAEyD,QAAF,IAAEA,GAAF,UAAEA,EAAU/B,eAAZ,aAAE,EAAmBS,WACzB9B,IAAG,OAAEoD,QAAF,IAAEA,GAAF,UAAEA,EAAU/B,eAAZ,aAAE,EAAmBM,YAE1B7I,QAAQJ,IAAI,eACX,CAAC0K,EAAUA,EAAS/B,QAASsB,EAAYY,IAE1C,yBACE7D,MAAK,aACHW,SAAU,WACV1C,WAAY,qBACZqC,IAAK,EACLL,KAAM,EACN+D,cAAe,QACZhE,IAGJrH,MAAMC,QAAQ+K,IACbA,EAAM9K,KAAI,SAACoL,EAAG3H,GAAJ,OACR,kBAACqD,EAAD,CAAeuE,IAAG,eAAU5H,GAAKwD,MAAOmE,EAAGhD,KAAMA,WCvBvDkD,E,WAkCJ,aAAe,IAAD,gCAhCLR,MAAQhL,QAgCH,KA/BdyL,wBA+Bc,OA9BLC,MAAQ1L,QA+Bf,IAAK,IAAID,EAAI,EAAGA,IAAM,EAAGA,EAAI+C,EAAgB/C,GAAI,GAC/C,IAAK,IAAID,GAAK,EAAGA,GAAK,EAAGA,EAAIgD,EAAgBhD,EAAG,GAC9Ce,KAAK6K,MAAM3J,KAAK,IAAI+B,EAAK,CAAEhE,IAAGC,OAElCc,KAAK8K,qBAAqBC,MAAK,WAE7Bf,IACA,IAAIgB,EAAoB,EACxBC,aAAQ,WAGFD,EAAoB,EAAKb,MAAMnC,SAGjC,EAAK6C,MAAM5J,SAAQ,SAAClC,GAAD,OAAQA,EAAEmE,UAAW,KAExC,EAAKgI,iBAEP,EAAKf,MAAMlJ,SAAQ,YAA4B,IAAzBJ,EAAwB,EAAxBA,OAAQmB,EAAgB,EAAhBA,UAE5BnB,EAAOI,SAAQ,YAAe,IAAZhC,EAAW,EAAXA,EAAGC,EAAQ,EAARA,EACbiM,EAAO,EAAKpD,OAAO9I,EAAGC,GACvBiM,EAAKjI,WAAUiI,EAAKjI,UAAW,GAC/BiI,EAAK/H,eAAeJ,MAAK,SAACoI,GAAD,OAAQA,IAAOpJ,OAC3CmJ,EAAK/H,eAAelC,KAAKc,GACzBxC,EAAIxB,EACF,qCACAY,EAAkBoD,GAClBlD,EAAeqM,EAAMtK,gBAK7BmK,EAAoB,EAAKb,MAAMnC,a,8DA9DnC,OAAKhI,KAAK4K,mBAED5K,KAAKqL,cACThM,KAAI,SAACoL,GAAD,OAAOA,EAAE5J,UACbyK,QAAO,SAACC,EAAMC,GAAP,OAAgBD,EAAKxK,OAAOyK,KAAO,IAJV,K,gCAMd,IAAD,EACtB,OAAO,UAAAxL,KAAKmK,aAAL,eAAYnC,SAAU,I,sCAG7B,OAAKhI,KAAK4K,mBACE5K,KAAKqL,cAAchM,KAAI,SAACoL,GAAD,OAAOA,EAAE5J,OAAO4J,EAAE5J,OAAOmH,OAAS,MADhC,K,2BAG3B,IAAD,OACHyD,EAAOtM,QAYb,OAXAa,KAAK6K,MACFa,QACAC,MAAK,SAACzJ,EAAG0J,GAAJ,OAAU1J,EAAErB,OAAO5B,EAAI2M,EAAE/K,OAAO5B,KACrCyM,QACAC,MAAK,SAACzJ,EAAG0J,GAAJ,OAAUA,EAAE/K,OAAO3B,EAAIgD,EAAErB,OAAO3B,KACrC+B,SAAQ,SAAClC,GAAO,IACPG,EAAMH,EAAE8B,OAAR3B,EACF2M,EAAMJ,EAAKK,MAAK,SAACC,GAAD,OAAOA,EAAEC,SAAW9M,KACrC2M,EACAA,EAAIhB,MAAM3J,KAAKnC,GADV0M,EAAKvK,KAAK,CAAE8K,OAAQ9M,EAAG2L,MAAO,CAAC9L,GAAI0I,KAAM,OAGhDgE,M,qDAwCQ,IAAD,gBACM7K,GADN,IACd,2BAAuC,CAAC,IAA7BqL,EAA4B,QACrCjM,KAAK+H,OAAOkE,EAAMhN,EAAGgN,EAAM/M,GAAIgE,UAAW,GAF9B,iC,oLAKSgJ,E,+BAAsB,E,cACzBtL,G,gHAATqL,E,iBACH,IAAIE,SAAQ,SAACJ,GAAD,OAChBK,YAAW,WACT,EAAKrE,OAAOkE,EAAMhN,EAAGgN,EAAM/M,GAAIgE,UAAW,EAC1C6I,GAAE,KACDG,M,oZAIFjN,EAAWC,GAChB,OAAOc,KAAK6K,MAAMiB,MAAK,SAAC/M,GAAD,OAAOA,EAAE8B,OAAO5B,IAAMA,GAAKF,EAAE8B,OAAO3B,IAAMA,O,sCA6CnD2I,GACd,IAAMD,EAAK5H,KAAK4K,mBAChB,GAAKhD,EAAL,CAIEpI,EAAIsD,EACF,4CACAhE,EAAe8I,GACf9I,EAAe+I,IAEjB,IANK,EAMCwE,EAAOrM,KAAKsM,iBAAiBzE,GAN9B,cAOkBwE,EAAKxL,QAPvB,IAOL,2BAAoC,CAAC,IAAD,UAAvB5B,EAAuB,EAAvBA,EAAGC,EAAoB,EAApBA,EACRH,EAAIiB,KAAK+H,OAAO9I,EAAGC,GACpBH,EAAGmE,WACNnE,EAAGmE,UAAW,EACd1D,EAAIsD,EAAE,kBAAmBhE,EAAeC,EAAG8B,WAX1C,8BAcLb,KAAKmK,MAAMjJ,KAAKmL,GAChB7M,EAAIxB,EACF,oCACAc,EAAeuN,EAAKxL,QACpBb,KAAKuM,WAEPvM,KAAK4K,wBAAqB3C,EAC1BzI,EAAIxB,EAAE,oCAvBNwB,EAAIgN,EAAE,iE,uCA0BO3E,GACf,OAAO7H,KAAKqL,cAAcS,MAAK,SAACrB,GAAD,OAC7BA,EAAE5J,OAAOmC,MAAK,SAACjE,GAAD,OC9KsB6M,ED8KG/D,GC9Kd3F,ED8KWnD,GC7K/BE,IAAM2M,EAAE3M,GAAKiD,EAAEhD,IAAM0M,EAAE1M,EAD3B,IAAwBgD,EAAW0J,U,oCDwGN,IAAD,OACzBa,EAAKjN,EAAIC,UACXgN,EAAKlN,EAASc,MAAMK,EAAYnB,EAASc,MAC7C,IAH+B,EAGzBgL,EAAgBlM,QAHS,cX7D1B,CACLrB,EAAUU,GACVV,EAAUQ,KACVR,EAAUM,KACVN,EAAUI,MACVJ,EAAUU,GAAKV,EAAUM,KACzBN,EAAUU,GAAKV,EAAUI,MACzBJ,EAAUQ,KAAOR,EAAUM,KAC3BN,EAAUQ,KAAOR,EAAUI,QWqDI,qBAS7B,IAT6B,IAIpB8D,EAJoB,UAKd,EAAK4I,mBAAd3L,EALuB,EAKvBA,EAAGC,EALoB,EAKpBA,EACLwN,EAAa,EACbC,EAAgB,EAChBC,EAAazN,QACR2D,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAAC,IAAD,EAC1B8J,EAAW1L,KAAK,CAAEjC,IAAGC,MACrB,IAAMiM,EAAO,EAAKpD,OAAO9I,EAAGC,IACxB,OAACiM,QAAD,IAACA,OAAD,EAACA,EAAMjI,WAAUyJ,KAEnB,OAACxB,QAAD,IAACA,GAAD,UAACA,EAAM/H,sBAAP,aAAC,EAAsBJ,MACrB,SAACoI,GAAD,OAAQA,IAAOpJ,GAAaN,EAAkB0J,EAAIpJ,QAGpD0K,IAGF,IAAIG,EAAO9K,EAAc,CAAE9C,IAAGC,KAAK8C,GACnC/C,EAAI4N,EAAK5N,EACTC,EAAI2N,EAAK3N,EAEX,GAAmB,IAAfwN,GAAoBC,GAAiB,EAAG,CAC1C,IAAMlC,EAAI,IAAIjD,EAAUoF,EAAY,GACpCpN,EAAIsD,EACF,mDACAhE,EAAe,CAAEG,IAAGC,MACpBN,EAAkBoD,GAClBlD,EAAe8N,IAEjBvB,EAAcnK,KAAKuJ,KA7BvB,2BAA0C,IAJX,8BAqC/B,OADA/J,EAAY+L,GACLpB,M,KAnILV,EACYmC,MAAQ,CAAE7N,EAAG,EAAGC,EAAG,G,SAwKzB4K,O,2BAAAA,I,qBAAAA,I,wBAAAA,M,KAMZvG,YAASoH,EAAM,CACbC,mBAAoBpH,IACpBuJ,kBAAmB7D,IACnB8D,gBAAiB9D,IACjBiB,MAAO3G,IACPiI,KAAMvC,IACN2B,MAAOrH,IACP+I,UAAWrD,MAGEyB,Q,iBEhMf,SAASsC,EAAe5G,GAAqC,IAAD,EACpDuE,EAAkB,UAAGvE,EAAMoB,YAAT,aAAG,EAAYmD,mBACvC,OACoB,OAAlBA,QAAkB,IAAlBA,OAAA,EAAAA,EAAoB3L,KAAMoH,EAAMxF,OAAO5B,IACrB,OAAlB2L,QAAkB,IAAlBA,OAAA,EAAAA,EAAoB1L,KAAMmH,EAAMxF,OAAO3B,EAGpC,IAAMgO,EAAgB9G,aAAS,SAACC,GACrC,IAAMlD,EAAQ2C,IAAMqH,OAA6B,MACzC1F,EAA2BpB,EAA3BoB,KAAM5G,EAAqBwF,EAArBxF,OAAQuM,EAAa/G,EAAb+G,SAF6C,EAGlD/G,EAAMxF,OAAf5B,EAH2D,EAG3DA,EAAGC,EAHwD,EAGxDA,EACLiM,EAAO9E,EAAMoB,KAAKM,OAAO9I,EAAGC,GAC5BmO,EAAgBhH,EAAMoB,KAAKsF,kBAAkB/J,MACjD,SAACjE,GAAD,OAAOA,EAAEE,IAAMA,GAAKF,EAAEG,IAAMA,KAExBoO,EACJD,GAAiB5F,EAAKuF,gBAAgBhK,MAAK,SAACjE,GAAD,OAAOA,EAAEE,IAAMA,GAAKF,EAAEG,IAAMA,KACjEsG,EAAUI,IAAVJ,MACRM,IAAME,WAAU,WACRmF,IAAMA,EAAKhI,MAAQA,KACxB,CAACsE,EAAM5G,EAAQ5B,EAAGC,EAAGiM,IACxB,IAAMoC,EAAaN,EAAe5G,GAElC,OADAzG,QAAQJ,IAAI,WAAY4N,GAEtB,wBACEI,IAAKrK,EACLsK,UAAS,gBACTjH,MAAO,CACLG,MAAOyG,EACPvG,OAAQuG,EACRpI,MAAOqI,EACHK,IAAMlI,EAAM5B,QAAQC,QAAQ8J,MAAMC,OAAO,IAAKC,MAC9CH,IAAMlI,EAAM5B,QAAQC,QAAQC,MAAM8J,OAAO,IAAKC,MAClDC,UAAc,OAAJ3C,QAAI,IAAJA,OAAA,EAAAA,EAAMjI,UAAW,GAAK,GAChC6K,YAAgB,OAAJ5C,QAAI,IAAJA,OAAA,EAAAA,EAAMjI,UAAW,IAAM,IACnC8K,gBAAiBV,EACb9H,EAAM5B,QAAQC,QAAQoK,MACtBV,IAAeF,EACf7H,EAAM5B,QAAQnD,MAAMwN,MACpBV,GAAcF,EACd7H,EAAM5B,QAAQtD,KAAKwD,KACnBuJ,EACA7H,EAAM5B,QAAQS,UAAU4J,MACxB,WAENC,QAAS,WAAO,IAAD,KAEX,UAAA7H,EAAMoB,KAAKmD,0BAAX,eAA+B3L,KAAMA,IACrC,UAAAoH,EAAMoB,KAAKmD,0BAAX,eAA+B1L,KAAMA,EAErCmH,EAAMoB,KAAKmD,wBAAqB3C,EAE5BoF,EAAehH,EAAMoB,KAAK0G,gBAAgB9H,EAAMxF,QAC/CwF,EAAMoB,KAAKmD,mBAAqBvE,EAAMxF,QAG/CuN,cAAA,WAAiBnP,EAAjB,aAAuBC,EAAvB,MAECiM,EAAMjI,UAAY+J,EAAe5G,GAAS,8CAAe,kDC7DnDgI,EAAM,SAAChI,GAClB,OACE,4BACGA,EAAMwE,MAAMxL,KAAI,SAAC8L,GAAD,OACf,kBAAC+B,EAAD,eACEE,SAAU/G,EAAM+G,SAChB3F,KAAMpB,EAAMoB,KACZiD,IAAKS,EAAKtK,OAAO5B,GACbkM,S,SCECmD,GAZC,SAACjI,GAAsC,IAC7Cb,EAAUI,IAAVJ,MACR,OACE,yCACMa,EADN,CAEEG,MAAK,aAAI+H,QAAS,OAAQvJ,MAAOQ,EAAM5B,QAAQgB,KAAKf,SAAYwC,EAAMG,SAErEH,EAAMmI,W,kDC0BEC,GAzBD,SAACpI,GAGR,IACGb,EAAUI,IAAVJ,MACAkJ,EAA8BrI,EAA9BqI,WAAYC,EAAkBtI,EAAlBsI,cACpB,OACE,oCACE,kBAAC,GAAD,CAASnI,MAAO,CAAEoI,QAAS,WACzB,kBAAC,GAAD,CAASpI,MAAO,CAAEqI,SAAU,IAC1B,wBAAIrI,MAAO,CAAExB,MAAOQ,EAAM5B,QAAQgB,KAAKf,QAASiL,cAAe,IAA/D,aAIF,kBAAC,GAAD,KACE,kBAACC,GAAA,EAAD,CAAYb,QAAS,kBAAMS,GAAeD,MACtCA,GAAc,kBAAC,KAAD,CAAU1J,MAAM,WAC/B0J,GAAc,kBAAC,KAAD,W,oBCvBrBM,GAAwC,CAC5ClB,SAAU,OACVmB,OAAQ,UACRC,OAAQ,iBACRX,QAAS,OACTM,SAAU,GAoEGM,GAjEO,WAAO,IAAD,EACEvJ,IAApBJ,EADkB,EAClBA,MAAOG,EADW,EACXA,SACTyJ,EAAoB3J,OAAOQ,OAAOZ,GAAQa,QAAQV,GAClD6J,EAAY5J,OAAOC,KAAKL,GAe9B,OACE,kBAAC,GAAD,CACEmB,MAAO,CACL8I,SAAU,SACVT,SAAU,GAEZX,QAAS,SAACqB,GACRA,EAAEC,oBAGJ,0BACEhJ,MAAO,CACL+H,QAAS,OACTM,SAAU,EACVf,SAAU,MACVzG,QAAS,GACToI,WAAY,EACZC,UAAW,SACXJ,SAAU,SACVK,YAAa,KATjB,SAcA,kBAAC,GAAD,CAASnJ,MAAO,CAAEqI,SAAU,IAC1B,uBACErI,MAAOwI,GACPvB,UAAU,WACVS,QAAS,kBA1CQ,WACvB,IAAM0B,EACJP,EACED,EAAoB,EAAIA,EAAoB,EAAIC,EAAUrH,OAAS,GAEvErC,EAASN,EAAOuK,IAqCKC,KAHjB,QAOA,0BAAMrJ,MAAO,CAAEqI,SAAU,EAAGa,UAAW,WACpCjK,OAAOC,KAAKL,GAAQI,OAAOQ,OAAOZ,GAAQa,QAAQV,KAErD,uBACEgB,MAAK,2BAAOwI,IAAP,IAAyBc,cAAe,gBAC7CrC,UAAU,WACVS,QAAS,kBA7CI,WACnB,IAAM0B,EACJP,EACED,EAAoB,EAAIC,EAAUrH,OAASoH,EAAoB,EAAI,GAEvEzJ,EAASN,EAAOuK,IAwCKG,KAHjB,W,kIC9CFC,GAAe,SAAC3J,GAKf,IACG4J,EAAkC5J,EAAlC4J,KAAM/B,EAA4B7H,EAA5B6H,QAAStJ,EAAmByB,EAAnBzB,KAAMkJ,EAAazH,EAAbyH,SAC7B,OACE,kBAACoC,GAAA,EAAD,CAAUhC,QAASA,EAAS1H,MAAO,CAAEyI,OAAQ,YAC3C,kBAACkB,GAAA,EAAD,CAAQC,WAAS,GACf,kBAAC,GAAD,CAAS5J,MAAO,CAAEG,MAAO,QACvB,0BACEH,MAAO,CAAEG,MAAO,GAAI0J,YAA0B,SAAbvC,EAAsB,EAAI,KAE1DmC,GAAQA,GAEX,kBAACK,GAAA,EAAD,CACEtL,MAAM,cACNwB,MAAO,CAAEsH,SAAUA,GAAY,OAAQyC,UAAW,IAEjD3L,OAgGE4L,GAxFFpK,aAAS,SAACC,GAAqD,IAAD,EACrCP,IAAMC,UAAS,GADsB,mBAClE2I,EADkE,KACtDC,EADsD,KAEjEnJ,EAAUI,IAAVJ,MACR,OACE,oCACE,kBAAC,GAAU,CAAEkJ,aAAYC,kBACzB,kBAAC,GAAD,CAASnI,MAAO,CAAEoI,QAAS,WACzB,kBAAC0B,GAAA,EAAD,CACEtL,MAAM,cACNwB,MAAO,CAAE+H,QAAS,OAAQM,SAAU,EAAGD,QAAS,WAFlD,WAIWvI,EAAMoB,KAAK8E,WAEtB,kBAACwC,GAAA,EAAD,CAAYb,QAAS,kBAAM7H,EAAMoB,KAAK0C,MAAMsG,QAC1C,kBAAC,KAAD,QAGJ,kBAACC,EAAA,EAAD,CACEC,OAAO,OACPC,KAAMlC,EACNmC,QAAS,kBAAMlC,GAAc,KAE7B,kBAAC,GAAD,CACEnI,MAAO,CACL8I,SAAU,SACVwB,WAAY,SACZC,SAAU,SACVlK,OAAQ,QACRmH,gBAAiBxI,EAAM5B,QAAQa,WAAWE,QAG5C,kBAACqM,GAAA,EAAD,CACExK,MAAO,CACL+J,UAAW,OACXU,aAAc,OACdtK,MAAO,IACPE,OAAQ,IACRmH,gBAAiBxI,EAAM5B,QAAQa,WAAWE,MAC1CK,MAAO,OACP0K,UAAW,WAGb,kBAACQ,GAAA,EAAD,KACE,kBAAC,GAAD,OAEF,kBAACgB,GAAA,EAAD,CAAS1K,MAAO,CAAE0I,OAAQ,cAC1B,kBAAC,GAAD,CACEtK,KAAK,WACLqL,KAAM,kBAAC,KAAD,CAAanC,SAAS,UAC5BI,QAAS,WCrDrBtO,QAAQJ,IAAI,aACZ2R,GAAY1J,KAAO,IAAIkD,EDsDTgE,GAAc,MAGlB,kBAAC,GAAD,CACE/J,KAAK,YACLqL,KAAM,kBAAC,KAAD,CAAcnC,SAAS,UAC7BI,QAAS,YCtDhB,WACL,IAAMkD,EAAYC,KAAKC,UACrBH,GAAY1J,KAAK0C,MAAM9K,KAAI,SAACgN,GAAD,OAAUA,EAAKxL,WAE5C0Q,aAAaC,QlBtDuB,akBsDSJ,GDmD/BK,GACA9C,GAAc,MAGlB,kBAAC,GAAD,CACE/J,KAAK,YACLqL,KAAM,kBAAC,KAAD,CAAcnC,SAAS,UAC7BI,QAAS,YCtDhB,WAAP,iCDuDgBwD,GAAW3G,MAAK,SAAC4G,GACfhD,GAAc,SAIpB,kBAACuC,GAAA,EAAD,CAAS1K,MAAO,CAAE0I,OAAQ,cAC1B,kBAAC,GAAD,CACEhB,QAAS,WACPS,GAAc,GACdtI,EAAMuL,iBAERhN,KAAK,eACLkJ,SAAS,OACTmC,KAAM,kBAAC,KAAD,CAAkBnC,SAAS,UAAUI,QAAS,wB,+EElH5D2D,GAAI,SAACxL,GACT,OACE,kBAACiK,GAAA,EAAD,CAAYwB,QAAQ,QAAQtL,MAAO,CAAEoI,QAAS,UAC3CvI,EAAMmI,WAsDEuD,GAjDG,SAAC1L,GACjB,IAAMoD,EAAaN,IAEbxC,EAAQnE,KAAKC,IACjBD,KAAKC,IAAIgH,EAAW9C,MAAQ8C,EAAW5C,QAFxB,KAKjB,OAAQR,EAAM2L,OAGZ,kBAACC,GAAA,EAAD,CACErB,KAAMvK,EAAM2L,OACZE,oBAAqBpM,IAAMqM,YAAW,SAAC9L,EAAOmH,GAAR,OACpC,kBAAC4E,GAAA,EAAD,eAAOpQ,UAAU,QAAW,CAAEwL,OAAWnH,OAE3CwK,QAASxK,EAAMwK,SAEf,kBAACwB,GAAA,EAAD,CAAO7L,MAAO,CAAEG,UACd,kBAAC2L,GAAA,EAAD,CAAM9L,MAAO,CAAEoI,QAAS,IAAM2D,WAAS,GACrC,kBAACjC,GAAA,EAAD,CAAYwB,QAAQ,MAApB,wBACA,kBAAC,GAAD,oEAEE,6BAFF,sDAKA,kBAACQ,GAAA,EAAD,CAAMjQ,GAAI,GAAImE,MAAO,CAAEkJ,UAAW,WAChC,yBAAK8C,IAAKC,QAEZ,kBAAC,GAAD,gKAKA,kBAACH,GAAA,EAAD,CAAMjQ,GAAI,GAAImE,MAAO,CAAEkJ,UAAW,WAChC,yBAAK8C,IAAKE,QAEZ,kBAAC,GAAD,4FAEsB,6BAFtB,2GAMA,kBAAC,GAAD,mEAlCN,sCCjBSC,GAAQvM,aAAS,SAACC,GAA2B,IAChDoB,EAASpB,EAAToB,KACFyC,EAAWpE,IAAMqH,OAAyB,MACxC3H,EAAUI,IAAVJ,MACFiE,EAAaN,IACbyJ,EAAiBpQ,KAAKC,IAAIgH,EAAW5C,OAAS4C,EAAW9C,OAGzDyG,EAAW5K,KAAKC,IACpBD,KAAKsG,OAAO8J,EAHU,IpBlBO,IoBmBX,IAKpB9M,IAAME,WAAU,WACdgE,MACC,CAACP,IACJ,IAAMjD,EAAuB,CAC3BG,MpB5B6B,GoB4BFyG,EAC3B8B,OAAQ,QAjB6C,EAmBTpJ,IAAMC,UAAS,GAnBN,mBAmBhD8M,EAnBgD,KAmB/BC,EAnB+B,KAoBvD,OACE,kBAAC,GAAD,CACEtM,MAAO,CACL/B,WAAYe,EAAM5B,QAAQa,WAAWC,QACrCwK,OAAQ,OACR6D,eAAgB,SAChBzD,SAAU,SACV0D,OAAO,aAAD,OAAexN,EAAM5B,QAAQC,QAAQC,QAG7C,kBAAC,GAAD,CACE0C,MAAO,CACL8I,SAAU,SACVJ,OAAQ,OACRN,QAAS,EACTqE,aAAczN,EAAM0N,QAAQ,GAC5BzO,WAAYe,EAAM5B,QAAQa,WAAWE,QAGvC,kBAAC,GAAD,CAAM8C,KAAMA,EAAMmK,cAAe,kBAAMkB,GAAmB,MAC1D,kBAAC,GAAD,CAAWd,OAAQa,EAAiBhC,QAAS,kBAAMiC,GAAmB,MACtE,2BAAOtF,IAAKtD,EAAUiJ,YAAa,EAAG3M,MAAOA,GAC3C,+BACGiB,EAAKgE,KAAKpM,KAAI,SAACwM,GAAD,OACb,kBAAC,EAAD,eAAKpE,KAAMA,EAAMiD,IAAKmB,EAAIG,QAAYH,EAAtC,CAA2CuB,SAAUA,UAI3D,kBAACnD,EAAD,CAAsBxC,KAAMA,EAAMyC,SAAUA,S,UF7C9CkJ,G,sCACJ3L,KAAa,IAAIkD,GAEnBpH,YAAS6P,GAAa,CACpB3L,KAAMjE,MAER,IAAM2N,GAAc,IAAIiC,G,8CAsCjB,sBAAAlR,EAAA,+EACE,IAAIiK,SAAQ,SAACkH,GAElB,IAAMjC,EAAYG,aAAa+B,QlB7DG,ckB8DlC,GAAMlC,EAEJ,IAEED,GAAY1J,KAAO,IAAIkD,EACR0G,KAAKkC,MAAMnC,GAA+B/R,KACvD,SAACwB,GAAD,OAAY,IAAI2G,EAAU3G,EAAQsQ,GAAY1J,SAG1CxG,SAAQ,SAACwJ,GACbA,EAAI,IAAIjD,EAAUiD,EAAE5J,OAAQsQ,GAAY1J,MACxC0J,GAAY1J,KAAK0C,MAAMjJ,KAAKuJ,MAE9B4I,GAAQ,GACR,MAAO9D,GACP8D,GAAQ,GAGZA,GAAQ,OAtBL,4C,sBA0BQG,OA7DHpN,aAAS,WAAO,IAClBZ,EAAUI,IAAVJ,MAOR,OANAM,IAAME,WAAU,WACdpG,QAAQJ,IACN,uBACAiG,OAAOC,KAAKL,GAAQI,OAAOQ,OAAOZ,GAAQa,QAAQV,OAEnD,CAACA,IAEF,kBAACiO,GAAA,EAAD,CAAejO,MAAOA,GACpB,kBAACmN,GAAD,CAAOlL,KAAM0J,GAAY1J,WGtBXiM,QACW,cAA7BrK,OAAOsK,SAASC,UAEe,UAA7BvK,OAAOsK,SAASC,UAEhBvK,OAAOsK,SAASC,SAASC,MACvB,2DCXNC,IAASC,OACP,kBAAC,IAAMC,WAAP,KACI,kBAAC,GAAD,OAEJC,SAASC,eAAe,SDgIpB,kBAAmBC,WACrBA,UAAUC,cAAcC,MACrBtJ,MAAK,SAAAuJ,GACJA,EAAaC,gBAEdC,OAAM,SAAA/T,GACLb,QAAQa,MAAMA,EAAMV,a,iBEjJ5B0U,EAAOC,QAAU,0/B,mBCAjBD,EAAOC,QAAU,IAA0B,oD","file":"static/js/main.ea074574.chunk.js","sourcesContent":["import Coords from \"./Coords\";\r\n\r\nexport enum Direction {\r\n  None = 0,\r\n  Right = 1 << 0,\r\n  Left = 1 << 1,\r\n  Down = 1 << 2,\r\n  Up = 1 << 3,\r\n}\r\n\r\nexport function dissectDirection(d: Direction) {\r\n  const [isRight, isLeft, isDown, isUp] = [\r\n    (d & Direction.Right) === Direction.Right,\r\n    (d & Direction.Left) === Direction.Left,\r\n    (d & Direction.Down) === Direction.Down,\r\n    (d & Direction.Up) === Direction.Up,\r\n  ];\r\n  return {\r\n    isRight,\r\n    isLeft,\r\n    isDown,\r\n    isUp,\r\n    isDiagonal: (isUp || isDown) && (isRight || isLeft),\r\n    isHorizontal: (isRight || isLeft) && !(isUp || isDown),\r\n    isVertical: (isUp || isDown) && !(isRight || isLeft),\r\n  };\r\n}\r\n\r\nexport function directionToString(d: Direction) {\r\n  const dir = dissectDirection(d);\r\n  return (\r\n    (dir.isUp ? \"up\" : \"\") +\r\n    (dir.isDown ? \"down\" : \"\") +\r\n    (dir.isRight ? \"right\" : \"\") +\r\n    (dir.isLeft ? \"left\" : \"\")\r\n  );\r\n}\r\n\r\nexport function coordsToString(c: Coords | Coords[]): String {\r\n  const coordToString = (c: Coords) => {\r\n    return `(${c.x}, ${c.y})`;\r\n  };\r\n  return Array.isArray(c)\r\n    ? `[${c.map(coordToString).join(\", \")}]`\r\n    : coordToString(c);\r\n}\r\n\r\nexport function allDirections(): Direction[] {\r\n  return [\r\n    Direction.Up,\r\n    Direction.Down,\r\n    Direction.Left,\r\n    Direction.Right,\r\n    Direction.Up | Direction.Left,\r\n    Direction.Up | Direction.Right,\r\n    Direction.Down | Direction.Left,\r\n    Direction.Down | Direction.Right,\r\n  ];\r\n}\r\n","export const BOARD_MATRIX_SIZE = 20;\r\nexport const LOCALSTORAGE_STATE_KEY = \"game_lines\";\r\n","import { decorate, computed, observable } from \"mobx\";\r\n\r\nexport enum LogLevel {\r\n  None = 0,\r\n  Verbose,\r\n  Debug,\r\n  Info,\r\n  Warning,\r\n  Error,\r\n}\r\n\r\nclass Log {\r\n  MIN_LEVEL = LogLevel.Debug;\r\n\r\n  get minLevel(): String {\r\n    return LogLevel[this.MIN_LEVEL];\r\n  }\r\n  group(label: String) {\r\n    console.groupCollapsed(label);\r\n  }\r\n  groupEnd() {\r\n    console.groupEnd();\r\n  }\r\n  v(message?: any, ...optionalParams: any[]) {\r\n    if (this.MIN_LEVEL == LogLevel.Verbose) {\r\n      console.debug(message, ...optionalParams);\r\n    }\r\n  }\r\n  d(message?: any, ...optionalParams: any[]) {\r\n    if (this.MIN_LEVEL !== LogLevel.None && this.MIN_LEVEL <= LogLevel.Debug) {\r\n      console.debug(message, ...optionalParams);\r\n    }\r\n  }\r\n  i(message?: any, ...optionalParams: any[]) {\r\n    if (this.MIN_LEVEL !== LogLevel.None && this.MIN_LEVEL <= LogLevel.Info)\r\n      console.info(message, ...optionalParams);\r\n  }\r\n  w(message?: any, ...optionalParams: any[]) {\r\n    if (this.MIN_LEVEL !== LogLevel.None && this.MIN_LEVEL <= LogLevel.Warning)\r\n      console.warn(message, ...optionalParams);\r\n  }\r\n  e(message?: any, ...optionalParams: any[]) {\r\n    if (this.MIN_LEVEL !== LogLevel.None)\r\n      console.error(message, ...optionalParams);\r\n  }\r\n}\r\n\r\nconst log = new Log();\r\n\r\nexport function decreaseLogLevel() {\r\n  if (log.MIN_LEVEL - 1 === -1) log.MIN_LEVEL = LogLevel.Error;\r\n  else log.MIN_LEVEL--;\r\n}\r\n\r\nexport function setLogLevel(level: LogLevel) {\r\n  log.MIN_LEVEL = level;\r\n}\r\n\r\nexport default log;\r\n","import { Direction, dissectDirection, directionToString } from \"./Direction\";\r\nimport Coords from \"./Coords\";\r\nimport { BOARD_MATRIX_SIZE } from \"./constants\";\r\nimport log from \"./Log\";\r\n\r\nexport const initialCellCoords: Array<Coords> = (() => {\r\n  const coords = Array<Coords>();\r\n  const directions: Array<Direction> = Array().concat(\r\n    Array(3).fill(Direction.Right),\r\n    Array(3).fill(Direction.Down),\r\n    Array(3).fill(Direction.Right),\r\n    Array(3).fill(Direction.Down),\r\n    Array(3).fill(Direction.Left),\r\n    Array(3).fill(Direction.Down),\r\n    Array(3).fill(Direction.Left),\r\n    Array(3).fill(Direction.Up),\r\n    Array(3).fill(Direction.Left),\r\n    Array(3).fill(Direction.Up),\r\n    Array(3).fill(Direction.Right),\r\n    Array(3).fill(Direction.Up)\r\n  );\r\n  let x = -2;\r\n  let y = -5;\r\n  directions.forEach((d) => {\r\n    coords.push({ x, y });\r\n    const {\r\n      isLeft: isRtl,\r\n      isRight: isLtr,\r\n      isDown: isUtd,\r\n      isUp: isDtu,\r\n    } = dissectDirection(d);\r\n    x = isLtr\r\n      ? x + 1 === 0\r\n        ? 1\r\n        : x + 1\r\n      : isRtl\r\n      ? x - 1 === 0\r\n        ? -1\r\n        : x - 1\r\n      : x;\r\n    y = isUtd\r\n      ? y + 1 === 0\r\n        ? 1\r\n        : y + 1\r\n      : isDtu\r\n      ? y - 1 === 0\r\n        ? -1\r\n        : y - 1\r\n      : y;\r\n  });\r\n  return coords;\r\n})();\r\n\r\nexport function getAngleForDirection(d: Direction): number {\r\n  const dd = dissectDirection(d);\r\n  return dd.isHorizontal && dd.isRight\r\n    ? 0\r\n    : dd.isRight && dd.isDown\r\n    ? 45\r\n    : dd.isVertical && dd.isDown\r\n    ? 90\r\n    : dd.isLeft && dd.isDown\r\n    ? 135\r\n    : dd.isHorizontal && dd.isLeft\r\n    ? 180\r\n    : dd.isLeft && dd.isUp\r\n    ? 225\r\n    : dd.isVertical && dd.isUp\r\n    ? 270\r\n    : dd.isRight && dd.isUp\r\n    ? 315\r\n    : NaN;\r\n}\r\n\r\nexport function getDirectionForCoords(c1: Coords, c2: Coords) {\r\n  let d = Direction.None;\r\n  if (c1.x < c2.x) d |= Direction.Right;\r\n  else if (c1.x > c2.x) d |= Direction.Left;\r\n  if (c1.y < c2.y) d |= Direction.Up;\r\n  else if (c1.y > c2.y) d |= Direction.Down;\r\n  return d;\r\n}\r\n\r\nexport function directionsOverlap(d1: Direction, d2: Direction): boolean {\r\n  if (d1 === d2) return true;\r\n  const [dir1, dir2] = [dissectDirection(d1), dissectDirection(d2)];\r\n  // Vertical line\r\n  return dir1.isVertical && dir2.isVertical // Vertical: \"|\"\r\n    ? true\r\n    : dir1.isHorizontal && dir2.isHorizontal // Horizontal: \"-\"\r\n    ? true\r\n    : dir1.isRight && dir1.isUp && dir2.isLeft && dir2.isDown // Diagonal 1: \"/\"\r\n    ? true\r\n    : dir2.isRight && dir2.isUp && dir1.isLeft && dir1.isDown // Diagonal 1 with reversed comparison\r\n    ? true\r\n    : dir1.isLeft && dir1.isUp && dir2.isRight && dir2.isDown // Diagonal 2: \"\\\"\r\n    ? true\r\n    : dir2.isLeft && dir2.isUp && dir1.isRight && dir1.isDown // Diagonal 2 with reversed comparison\r\n    ? true\r\n    : false;\r\n}\r\n\r\nexport function getClassNamesForLineDirections(\r\n  directions: Direction[]\r\n): String {\r\n  if (!Array.isArray(directions) || directions.length === 0) return \"\";\r\n  const a = Array<String>();\r\n  log.group(\"getClassNamesForLineDirections\");\r\n  for (const direction of directions) {\r\n    const d = dissectDirection(direction);\r\n    log.d(\r\n      \"Direction %s (%s): %s\",\r\n      direction,\r\n      directionToString(direction),\r\n      JSON.stringify(d)\r\n    );\r\n    if ((d.isUp && d.isRight) || (d.isDown && d.isLeft))\r\n      a.push(\"line-right-up\");\r\n    if ((d.isDown && d.isRight) || (d.isUp && d.isLeft))\r\n      a.push(\"line-right-down\");\r\n    if ((d.isUp || d.isDown) && !d.isRight && !d.isLeft)\r\n      a.push(\"line-vertical\");\r\n    if ((d.isRight || d.isLeft) && !d.isUp && !d.isDown)\r\n      a.push(\"line-horizontal\");\r\n  }\r\n  const s = a.join(\" \");\r\n  log.v(\r\n    `Directions [${directions\r\n      .map(directionToString)\r\n      .join(\", \")}] resulted in className=%s`,\r\n    s\r\n  );\r\n  log.groupEnd();\r\n\r\n  return s;\r\n}\r\n\r\nexport function getNextCoords(coords: Coords, direction: Direction): Coords {\r\n  const d = dissectDirection(direction);\r\n  let { x, y } = coords;\r\n  if (d.isUp) y = sumUntilNotZero(y, 1);\r\n  if (d.isDown) y = sumUntilNotZero(y, -1);\r\n  if (d.isRight) x = sumUntilNotZero(x, 1);\r\n  if (d.isLeft) x = sumUntilNotZero(x, -1);\r\n  // log.d(\r\n  //   \"Next coords from %s in direction %s is at %s\",\r\n  //   coordsToString(coords),\r\n  //   directionToString(direction),\r\n  //   coordsToString({ x, y })\r\n  // );\r\n  return { x, y };\r\n}\r\n\r\nexport function sumUntilNotZero(a: number, sumToAdd: number): number {\r\n  return a + sumToAdd === 0\r\n    ? sumUntilNotZero(a + sumToAdd, sumToAdd)\r\n    : a + sumToAdd;\r\n}\r\n\r\nexport const initialGameGrid = ((): Array<Coords> => {\r\n  const grid = [...initialCellCoords];\r\n  const padding = (BOARD_MATRIX_SIZE - 10) / 2;\r\n  const xs = grid.map(({ x, y }) => x);\r\n  const ys = grid.map(({ x, y }) => y);\r\n  const [startX, endX, startY, endY] = [\r\n    Math.min(...xs) - padding,\r\n    Math.max(...xs) + padding,\r\n    Math.min(...ys) - padding,\r\n    Math.max(...ys) + padding,\r\n  ];\r\n  console.debug(\r\n    \"Creating a matrix from [%o, %o] to [%o, %o]\",\r\n    startX,\r\n    startY,\r\n    endX,\r\n    endY\r\n  );\r\n  for (let i = startX; i < endX; i++)\r\n    for (let j = startY; j < endY; j++)\r\n      if (!grid.some(({ x, y }) => x === i && y === j))\r\n        grid.push({ x: i, y: j });\r\n  return grid;\r\n})();\r\n","import { decorate, observable } from \"mobx\";\r\nimport Coords from \"./Coords\";\r\nimport { Direction, coordsToString, directionToString } from \"./Direction\";\r\n\r\nclass Cell {\r\n  isOpened = false;\r\n  tdRef?: React.RefObject<HTMLTableCellElement>;\r\n  readonly lineDirections = Array<Direction>();\r\n  constructor(public readonly coords: Coords) {}\r\n}\r\n\r\nCell.prototype.toString = function (): string {\r\n  return `${this.isOpened ? \"Opened\" : \"Closed\"} cell ${coordsToString(\r\n    this.coords\r\n  )} (dir=${this.lineDirections.map((d) => directionToString(d)).join(\", \")})`;\r\n};\r\n\r\ndecorate(Cell, {\r\n  isOpened: observable,\r\n  lineDirections: observable,\r\n  tdRef: observable,\r\n});\r\n\r\nexport default Cell;\r\n","import { createMuiTheme, Theme } from \"@material-ui/core\";\r\n\r\nconst createTheme = (colors: {\r\n  lightest: string;\r\n  color2: string;\r\n  color3: string;\r\n  darkest: string;\r\n}) =>\r\n  createMuiTheme({\r\n    palette: {\r\n      primary: {\r\n        main: colors.darkest,\r\n      },\r\n      action: {\r\n        active: colors.lightest,\r\n        disabled: colors.color2,\r\n      },\r\n      secondary: { main: colors.color3 },\r\n      success: { main: colors.lightest },\r\n      info: { main: colors.color2 },\r\n      warning: { main: colors.color3 },\r\n      background: {\r\n        default: colors.darkest,\r\n        paper: colors.color3,\r\n      },\r\n      text: {\r\n        primary: colors.lightest,\r\n        secondary: colors.lightest,\r\n      },\r\n      divider: colors.lightest,\r\n    },\r\n    typography: {\r\n      allVariants: {\r\n        color: colors.lightest,\r\n        fontFamily:\r\n          'source-code-pro, Menlo, Monaco, Consolas, \"Courier New\", monospace',\r\n      },\r\n      button: {\r\n        textTransform: \"none\",\r\n      },\r\n      body1: {\r\n        color: colors.lightest,\r\n      },\r\n    },\r\n  });\r\n\r\nexport const themes: { [id: string]: Theme } = {\r\n  Default: createTheme({\r\n    lightest: \"#e7dfd5\",\r\n    color2: \"#84a9ac\",\r\n    color3: \"#3b6978\",\r\n    darkest: \"#204051\",\r\n  }),\r\n  \"Green Desert\": createTheme({\r\n    lightest: \"#e5e4cc\",\r\n    color2: \"#bac7a7\",\r\n    color3: \"#889e81\",\r\n    darkest: \"#698474\"\r\n  }),\r\n  \"Bumblebee\": createTheme({\r\n    lightest: \"#f4f4f4\",\r\n    color2: \"#f0a500\",\r\n    color3: \"#cf7500\",\r\n    darkest: \"#000000\"\r\n  }),\r\n  \"Watermelon\": createTheme({\r\n    lightest: \"#bbf1c8\",\r\n    color2: \"#80bdab\",\r\n    color3: \"#342b38\",\r\n    darkest: \"#ff9595\"\r\n  }),\r\n  \"Limestone\": createTheme({\r\n    lightest: \"#e1ffc2\",\r\n    color2: \"#c7e2b2\",\r\n    color3: \"#89c9b8\",\r\n    darkest: \"#092532\"\r\n  }),\r\n};\r\n","import React from \"react\";\r\nimport { Theme } from \"@material-ui/core/styles\";\r\nimport { themes } from \"../mui-themes\";\r\nimport { singletonHook } from \"react-singleton-hook\";\r\n\r\nconst init = {\r\n  theme: themes[Object.keys(themes)[0]],\r\n  setTheme: () => {},\r\n};\r\n\r\nfunction useThemeSelectorImpl() {\r\n  const [theme, setTheme] = React.useState<Theme>(init.theme);\r\n  React.useEffect(() => {\r\n    console.log(\r\n      \"[useThemeSetter]: Theme was changed to\",\r\n      Object.keys(themes)[Object.values(themes).indexOf(theme)]\r\n    );\r\n  }, [theme]);\r\n\r\n  return {\r\n    theme,\r\n    setTheme,\r\n  };\r\n}\r\n\r\nexport const useThemeSelector = singletonHook(init, useThemeSelectorImpl);\r\n","import React, { CSSProperties } from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport Game from \"../classes/Game\";\r\nimport { LineModel } from \"../classes/LineModel\";\r\nimport { useThemeSelector } from \"../hooks/useThemeSelector\";\r\n\r\nexport const LINE_THICKNESS = 3;\r\nconst LINE_OPACITY = 0.75;\r\nexport const LineComponent = observer((props: LineComponentProps) => {\r\n  const { model } = props;\r\n  const { dimensions } = model;\r\n  const { theme } = useThemeSelector();\r\n\r\n  return (\r\n    <>\r\n      {!dimensions && <></>}\r\n      {dimensions && (\r\n        <div\r\n          style={{\r\n            left: dimensions?.offsetX,\r\n            width: dimensions?.lengthPx,\r\n            height: LINE_THICKNESS,\r\n            top: dimensions?.offsetY,\r\n            transformOrigin: model.transformOrigin,\r\n            transform: `rotate(${dimensions?.rotationDeg}deg)`,\r\n            position: \"absolute\",\r\n          }}\r\n        >\r\n          <div\r\n            style={{\r\n              animationName: \"grow\",\r\n              opacity: LINE_OPACITY,\r\n              animationDuration: \"1s\",\r\n              animationTimingFunction: \"cubiz-bezier(0, 20, 50, 90)\",\r\n              background: theme.palette.background.paper,\r\n              height: LINE_THICKNESS,\r\n            }}\r\n          ></div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n});\r\n\r\nexport interface LineComponentProps {\r\n  model: LineModel;\r\n  game: Game;\r\n}\r\n","import { getDirectionForCoords, getAngleForDirection } from \"./utils\";\r\nimport Coords from \"./Coords\";\r\nimport { Direction, coordsToString, dissectDirection } from \"./Direction\";\r\nimport log from \"./Log\";\r\nimport Game from \"./Game\";\r\nimport Cell from \"./Cell\";\r\nimport { decorate, computed, observable } from \"mobx\";\r\nimport { LINE_THICKNESS } from \"../components/LineComponent\";\r\n\r\nclass LineModel {\r\n  get transformOrigin(): string | number | undefined {\r\n    const dd = dissectDirection(this.direction);\r\n    return dd.isDiagonal || dd.isHorizontal\r\n      ? `0 50%`\r\n      : dd.isVertical\r\n      ? `0 100%`\r\n      : undefined;\r\n  }\r\n  get dimensions():\r\n    | {\r\n        offsetX: number;\r\n        offsetY: number;\r\n        lengthPx: number;\r\n        rotationDeg: number;\r\n      }\r\n    | undefined {\r\n    if (!this.firstCell?.tdRef || !this.lastCell?.tdRef) return undefined;\r\n    const dd = dissectDirection(this.direction);\r\n    const firstTd = this.firstCell!.tdRef!.current!;\r\n    const lastTd = this.lastCell!.tdRef!.current!;\r\n    const cellWidth = firstTd.offsetWidth;\r\n    const cellHeight = firstTd.offsetHeight;\r\n\r\n    let [offsetX, offsetY, lengthPx] = [0, 0, 0];\r\n    if (dd.isHorizontal) {\r\n      offsetY = firstTd.offsetTop + cellHeight / 2 - LINE_THICKNESS / 2;\r\n      if (dd.isRight) {\r\n        lengthPx =\r\n          Math.abs(firstTd.offsetLeft - lastTd.offsetLeft) + 0.5 * cellWidth;\r\n        offsetX = firstTd.offsetLeft + 0.25 * cellWidth;\r\n      } else {\r\n        lengthPx =\r\n          Math.abs(lastTd.offsetLeft - firstTd.offsetLeft) + 0.5 * cellWidth;\r\n        offsetX = firstTd.offsetLeft + 0.75 * cellWidth;\r\n      }\r\n    } else if (dd.isVertical) {\r\n      offsetX =\r\n        firstTd.offsetLeft +\r\n        cellWidth / 2 +\r\n        LINE_THICKNESS / (dd.isUp ? 2 : -2);\r\n      offsetY =\r\n        firstTd.offsetTop +\r\n        cellHeight * (dd.isDown ? 0.2 : 0.8) -\r\n        LINE_THICKNESS;\r\n      const endY =\r\n        lastTd.offsetTop + cellHeight * (dd.isUp ? 0.2 : 0.8) - LINE_THICKNESS;\r\n      lengthPx = Math.abs(endY - offsetY);\r\n    } else if (dd.isDiagonal) {\r\n      const endX = lastTd.offsetLeft + (dd.isLeft ? 0 : cellWidth);\r\n      const endY = lastTd.offsetTop + (dd.isUp ? 0 : cellHeight);\r\n      offsetX = firstTd.offsetLeft + (dd.isRight ? 0 : cellWidth);\r\n      offsetY = firstTd.offsetTop + (dd.isDown ? 0 : cellHeight);\r\n      lengthPx = Math.floor(\r\n        Math.sqrt(\r\n          // Pythagoras\r\n          Math.pow(Math.floor(endX - offsetX), 2) +\r\n            Math.pow(Math.ceil(endY - offsetY), 2)\r\n        )\r\n      );\r\n    } else throw new Error(\"Invalid direction\");\r\n    return {\r\n      offsetX,\r\n      offsetY,\r\n      lengthPx,\r\n      rotationDeg: getAngleForDirection(this.direction),\r\n    };\r\n  }\r\n  direction: Direction;\r\n  firstCell: Cell;\r\n  lastCell: Cell;\r\n  constructor(public coords: Coords[], private game: Game) {\r\n    this.direction = getDirectionForCoords(coords[0], coords[1]);\r\n    this.firstCell = this.game.cellAt(this.coords[0].x, this.coords[0].y)!;\r\n    this.lastCell = this.game.cellAt(\r\n      this.coords[this.coords.length - 1].x,\r\n      this.coords[this.coords.length - 1].y\r\n    )!;\r\n  }\r\n}\r\n\r\ndecorate(LineModel, {\r\n  firstCell: observable,\r\n  lastCell: observable,\r\n  direction: observable,\r\n  dimensions: computed,\r\n  transformOrigin: computed,\r\n});\r\n\r\nexport { LineModel };\r\n","import { useState, useEffect } from \"react\";\r\n\r\nexport function useWindowSize() {\r\n  const isClient = typeof window === \"object\";\r\n\r\n  function getSize() {\r\n    return {\r\n      width: isClient ? window.innerWidth : undefined,\r\n\r\n      height: isClient ? window.innerHeight : undefined,\r\n    };\r\n  }\r\n\r\n  const [windowSize, setWindowSize] = useState(getSize);\r\n\r\n  useEffect(() => {\r\n    if (!isClient) {\r\n      return;\r\n    }\r\n\r\n    function handleResize() {\r\n      setWindowSize(getSize());\r\n    }\r\n\r\n    window.addEventListener(\"resize\", handleResize);\r\n\r\n    return () => window.removeEventListener(\"resize\", handleResize);\r\n  }, []); // Empty array ensures that effect is only run on mount and unmount\r\n\r\n  return windowSize;\r\n}\r\n","import React, { CSSProperties } from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport Game from \"../classes/Game\";\r\nimport { LineModel } from \"../classes/LineModel\";\r\nimport { LineComponent } from \"./LineComponent\";\r\nimport { useWindowSize } from \"../hooks/useWindowSize\";\r\nlet updateCallback = () => {};\r\nexport const updateOverlay = () => updateCallback();\r\nexport const LineOverlayComponent = observer(\r\n  (props: LineOverlayComponentProps) => {\r\n    const { game, tableRef } = props;\r\n    const { lines } = game;\r\n    const [style, setStyle] = React.useState<CSSProperties>({});\r\n    const windowSize = useWindowSize();\r\n    const [updateId, setUpdateId] = React.useState(0);\r\n    updateCallback = () => setUpdateId(updateId + 1);\r\n    React.useEffect(() => {\r\n      setStyle({\r\n        width: tableRef?.current?.offsetWidth,\r\n        height: tableRef?.current?.clientHeight,\r\n        left: tableRef?.current?.offsetLeft,\r\n        top: tableRef?.current?.offsetTop,\r\n      });\r\n      console.log(\"set style\");\r\n    }, [tableRef, tableRef.current, windowSize, updateId]);\r\n    return (\r\n      <div\r\n        style={{\r\n          position: \"absolute\",\r\n          background: \"rgba(45,91,0,0.15)\",\r\n          top: 0,\r\n          left: 0,\r\n          pointerEvents: \"none\",\r\n          ...style,\r\n        }}\r\n      >\r\n        {Array.isArray(lines) &&\r\n          lines.map((l, i) => (\r\n            <LineComponent key={`line-${i}`} model={l} game={game} />\r\n          ))}\r\n      </div>\r\n    );\r\n  }\r\n);\r\n\r\nexport interface LineOverlayComponentProps {\r\n  game: Game;\r\n  tableRef: React.RefObject<HTMLTableElement>;\r\n}\r\n","import {\r\n  initialCellCoords,\r\n  getNextCoords,\r\n  sumUntilNotZero,\r\n  directionsOverlap,\r\n} from \"./utils\";\r\nimport Coords, { areCoordsEqual as coordsAreEqual } from \"./Coords\";\r\nimport { RowProps } from \"../components/Row\";\r\nimport { decorate, observable, computed, autorun } from \"mobx\";\r\nimport { allDirections, coordsToString, directionToString } from \"./Direction\";\r\nimport Cell from \"./Cell\";\r\nimport log, { LogLevel, setLogLevel } from \"../classes/Log\";\r\nimport { LineModel } from \"./LineModel\";\r\nimport { updateOverlay } from \"../components/LineOverlay\";\r\n\r\nclass Game {\r\n  static readonly origo = { x: 0, y: 0 };\r\n  readonly lines = Array<LineModel>();\r\n  selectedCellCoords: Coords | undefined;\r\n  readonly cells = Array<Cell>();\r\n  get highlightedCoords(): Array<Coords> {\r\n    if (!this.selectedCellCoords) return [];\r\n    else\r\n      return this.possibleLines\r\n        .map((l) => l.coords)\r\n        .reduce((prev, curr) => prev.concat(curr), []);\r\n  }\r\n  get lineCount(): number {\r\n    return this.lines?.length || 0;\r\n  }\r\n  get endOfLineCoords(): Array<Coords> {\r\n    if (!this.selectedCellCoords) return [];\r\n    else return this.possibleLines.map((l) => l.coords[l.coords.length - 1]);\r\n  }\r\n  get rows() {\r\n    const rows = Array<RowProps>();\r\n    this.cells\r\n      .slice() // MobX\r\n      .sort((a, b) => a.coords.x - b.coords.x)\r\n      .slice()\r\n      .sort((a, b) => b.coords.y - a.coords.y) // Note: because Y axis decreases downwards, reverse this sorting.\r\n      .forEach((c) => {\r\n        const { y } = c.coords;\r\n        const row = rows.find((r) => r.yIndex === y);\r\n        if (!row) rows.push({ yIndex: y, cells: [c], game: this });\r\n        else row.cells.push(c);\r\n      });\r\n    return rows;\r\n  }\r\n  constructor() {\r\n    for (let y = 9; y >= -9; y = sumUntilNotZero(y, -1))\r\n      for (let x = -9; x <= 9; x = sumUntilNotZero(x, 1))\r\n        this.cells.push(new Cell({ x, y }));\r\n\r\n    this.initiateBoardAsync().then(() => {\r\n      // Ensure overlay position after initializing board\r\n      updateOverlay();\r\n      let previousLineCount = 0;\r\n      autorun(() => {\r\n        // As {this.lines} is a MobX observable,\r\n        // * this will run each times the collection is updated.\r\n        if (previousLineCount > this.lines.length) {\r\n          // A line was deleted (Undo was requested)\r\n          // Close all dots\r\n          this.cells.forEach((c) => (c.isOpened = false));\r\n          // Re-open initial dots\r\n          this.initiateBoard();\r\n        }\r\n        this.lines.forEach(({ coords, direction }) => {\r\n          // Open each cell that has a line over them\r\n          coords.forEach(({ x, y }) => {\r\n            const cell = this.cellAt(x, y)!;\r\n            if (!cell.isOpened) cell.isOpened = true;\r\n            if (!cell.lineDirections.some((ld) => ld === direction)) {\r\n              cell.lineDirections.push(direction);\r\n              log.d(\r\n                \"Added direction (%o) to cell at %o\",\r\n                directionToString(direction),\r\n                coordsToString(cell!.coords)\r\n              );\r\n            }\r\n          });\r\n        });\r\n        previousLineCount = this.lines.length;\r\n      });\r\n    });\r\n  }\r\n  initiateBoard() {\r\n    for (const coord of initialCellCoords) {\r\n      this.cellAt(coord.x, coord.y)!.isOpened = true;\r\n    }\r\n  }\r\n  async initiateBoardAsync(animDelayMs: number = 8) {\r\n    for (const coord of initialCellCoords) {\r\n      await new Promise((r: any) =>\r\n        setTimeout(() => {\r\n          this.cellAt(coord.x, coord.y)!.isOpened = true;\r\n          r(true);\r\n        }, animDelayMs)\r\n      );\r\n    }\r\n  }\r\n  cellAt(x: number, y: number): Cell | undefined {\r\n    return this.cells.find((c) => c.coords.x === x && c.coords.y === y);\r\n  }\r\n  /**\r\n   * Get all lines that can be drawn from coords\r\n   * @param {Coords} coords The x and y positions of the cell (something within [-9...9])\r\n   */\r\n  get possibleLines(): LineModel[] {\r\n    const ll = log.MIN_LEVEL;\r\n    if (ll < LogLevel.Info) setLogLevel(LogLevel.Info); // skip debug logs for a while\r\n    const possibleLines = Array<LineModel>();\r\n    for (const direction of allDirections()) {\r\n      let { x, y } = this.selectedCellCoords!!;\r\n      let lineLength = 0;\r\n      let unopenedCells = 0;\r\n      let lineCoords = Array<Coords>();\r\n      for (let i = 0; i < 5; i++) {\r\n        lineCoords.push({ x, y });\r\n        const cell = this.cellAt(x, y);\r\n        if (!cell?.isOpened) unopenedCells++;\r\n        if (\r\n          !cell?.lineDirections?.some(\r\n            (ld) => ld === direction || directionsOverlap(ld, direction)\r\n          )\r\n        ) {\r\n          lineLength++;\r\n        }\r\n\r\n        let next = getNextCoords({ x, y }, direction);\r\n        x = next.x;\r\n        y = next.y;\r\n      }\r\n      if (lineLength === 5 && unopenedCells <= 1) {\r\n        const l = new LineModel(lineCoords, this);\r\n        log.i(\r\n          \"Possible line from coords %s to direction %s: %s\",\r\n          coordsToString({ x, y }),\r\n          directionToString(direction),\r\n          coordsToString(lineCoords)\r\n        );\r\n        possibleLines.push(l);\r\n      }\r\n    }\r\n    setLogLevel(ll);\r\n    return possibleLines;\r\n  }\r\n  tryCompleteLine(c2: Coords) {\r\n    const c1 = this.selectedCellCoords;\r\n    if (!c1) {\r\n      log.w(\"Could not complete line due to selected coords being falsy.\");\r\n      return;\r\n    } else {\r\n      log.i(\r\n        \"Attempting to complete line from %o to %o\",\r\n        coordsToString(c1),\r\n        coordsToString(c2)\r\n      );\r\n      const line = this.getLineForCoords(c2)!;\r\n      for (const { x, y } of line.coords) {\r\n        const c = this.cellAt(x, y);\r\n        if (!c!.isOpened) {\r\n          c!.isOpened = true;\r\n          log.i(\"Opened cell at \", coordsToString(c!.coords));\r\n        }\r\n      }\r\n      this.lines.push(line);\r\n      log.d(\r\n        \"Added line at %s. Line count: %o.\",\r\n        coordsToString(line.coords),\r\n        this.lineCount\r\n      );\r\n      this.selectedCellCoords = undefined;\r\n      log.d(\"Reset selected cell coords.\");\r\n    }\r\n  }\r\n  getLineForCoords(c2: Coords): LineModel | undefined {\r\n    return this.possibleLines.find((l) =>\r\n      l.coords.some((c) => coordsAreEqual(c, c2))\r\n    );\r\n  }\r\n}\r\n\r\nexport enum GameState {\r\n  NotStarted = 0,\r\n  Started,\r\n  Finished,\r\n}\r\n\r\ndecorate(Game, {\r\n  selectedCellCoords: observable,\r\n  highlightedCoords: computed,\r\n  endOfLineCoords: computed,\r\n  lines: observable,\r\n  rows: computed,\r\n  cells: observable,\r\n  lineCount: computed,\r\n});\r\n\r\nexport default Game;\r\n","export default interface Coords {\r\n  x: number;\r\n  y: number;\r\n}\r\n\r\nexport function areCoordsEqual(a: Coords, b: Coords) {\r\n  return a.x === b.x && a.y === b.y;\r\n}\r\n","import React, { CSSProperties } from \"react\";\r\nimport Coords from \"../classes/Coords\";\r\nimport { observer } from \"mobx-react\";\r\nimport Game from \"../classes/Game\";\r\nimport { useThemeSelector } from \"../hooks/useThemeSelector\";\r\nimport { Theme } from \"@material-ui/core/styles\";\r\nimport Color from \"color\";\r\n\r\nfunction isCellSelected(props: CellComponentProps): boolean {\r\n  const selectedCellCoords = props.game?.selectedCellCoords;\r\n  return (\r\n    selectedCellCoords?.x === props.coords.x &&\r\n    selectedCellCoords?.y === props.coords.y\r\n  );\r\n}\r\nexport const CellComponent = observer((props: CellComponentProps) => {\r\n  const tdRef = React.useRef<HTMLTableCellElement>(null);\r\n  const { game, coords, cellSize } = props;\r\n  const { x, y } = props.coords;\r\n  const cell = props.game.cellAt(x, y);\r\n  const isHighlighted = props.game.highlightedCoords.some(\r\n    (c) => c.x === x && c.y === y\r\n  );\r\n  const isEndOfLine =\r\n    isHighlighted && game.endOfLineCoords.some((c) => c.x === x && c.y === y);\r\n  const { theme } = useThemeSelector();\r\n  React.useEffect(() => {\r\n    if (!!cell) cell.tdRef = tdRef;\r\n  }, [game, coords, x, y, cell]);\r\n  const isSelected = isCellSelected(props);\r\n  console.log(\"cellSize\", cellSize);\r\n  return (\r\n    <td\r\n      ref={tdRef}\r\n      className={`noselect cell`}\r\n      style={{\r\n        width: cellSize,\r\n        height: cellSize,\r\n        color: isHighlighted\r\n          ? Color(theme.palette.primary.dark).darken(0.2).hex()\r\n          : Color(theme.palette.primary.main).darken(0.2).hex(),\r\n        fontSize: cell?.isOpened ? 15 : 12,\r\n        fontWeight: cell?.isOpened ? 700 : 300,\r\n        backgroundColor: isEndOfLine\r\n          ? theme.palette.primary.light\r\n          : isSelected && !isHighlighted\r\n          ? theme.palette.error.light\r\n          : isSelected && isHighlighted\r\n          ? theme.palette.info.main\r\n          : isHighlighted\r\n          ? theme.palette.secondary.light\r\n          : \"#f9f9f9\",\r\n      }}\r\n      onClick={() => {\r\n        if (\r\n          props.game.selectedCellCoords?.x === x &&\r\n          props.game.selectedCellCoords?.y === y\r\n        ) {\r\n          props.game.selectedCellCoords = undefined;\r\n        } else {\r\n          if (isHighlighted) props.game.tryCompleteLine(props.coords);\r\n          else props.game.selectedCellCoords = props.coords;\r\n        }\r\n      }}\r\n      data-coords={`[${x}, ${y}]`}\r\n    >\r\n      {cell!.isOpened || isCellSelected(props) ? <>&#9675;</> : <>&bull;</>}\r\n    </td>\r\n  );\r\n});\r\n\r\nexport interface CellComponentProps {\r\n  coords: Coords;\r\n  game: Game;\r\n  cellSize: number;\r\n}\r\n","import React from \"react\";\r\nimport { CellComponentProps, CellComponent } from \"./CellComponent\";\r\nimport Game from \"../classes/Game\";\r\nimport Cell from \"../classes/Cell\";\r\n\r\nexport const Row = (props: RowProps) => {\r\n  return (\r\n    <tr>\r\n      {props.cells.map((cell) => (\r\n        <CellComponent\r\n          cellSize={props.cellSize!}\r\n          game={props.game}\r\n          key={cell.coords.x}\r\n          {...cell}\r\n        />\r\n      ))}\r\n    </tr>\r\n  );\r\n};\r\n\r\nexport interface RowProps {\r\n  yIndex: number;\r\n  game: Game;\r\n  cells: Array<Cell>;\r\n  cellSize?: number;\r\n}\r\n","import React, { HTMLProps } from \"react\";\r\nimport { useThemeSelector } from \"../hooks/useThemeSelector\";\r\n\r\nconst Flexbox = (props: HTMLProps<HTMLDivElement>) => {\r\n  const { theme } = useThemeSelector();\r\n  return (\r\n    <div\r\n      {...props}\r\n      style={{ display: \"flex\", color: theme.palette.text.primary, ...props.style }}\r\n    >\r\n      {props.children}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Flexbox;\r\n","import React from \"react\";\r\nimport Flexbox from \"./Flexbox\";\r\nimport { useThemeSelector } from \"../hooks/useThemeSelector\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Drawer from \"@material-ui/core/Drawer\";\r\nimport MenuIcon from \"@material-ui/icons/Menu\";\r\nimport MenuOpenIcon from \"@material-ui/icons/MenuOpen\";\r\nimport MenuList from \"@material-ui/core/MenuList\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ThemeSelector from \"./ThemeSelector\";\r\n\r\nconst Title = (props: {\r\n  isMenuOpen: boolean;\r\n  setIsMenuOpen: (is: boolean) => void;\r\n}) => {\r\n  const { theme } = useThemeSelector();\r\n  const { isMenuOpen, setIsMenuOpen } = props;\r\n  return (\r\n    <>\r\n      <Flexbox style={{ padding: \"0 25px\" }}>\r\n        <Flexbox style={{ flexGrow: 1 }}>\r\n          <h1 style={{ color: theme.palette.text.primary, paddingBottom: 5 }}>\r\n            Linegame\r\n          </h1>\r\n        </Flexbox>\r\n        <Flexbox>\r\n          <IconButton onClick={() => setIsMenuOpen(!isMenuOpen)}>\r\n            {!isMenuOpen && <MenuIcon color=\"action\" />}\r\n            {isMenuOpen && <MenuOpenIcon />}\r\n          </IconButton>\r\n        </Flexbox>\r\n      </Flexbox>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Title;\r\n","import React from \"react\";\r\nimport Flexbox from \"./Flexbox\";\r\nimport { themes } from \"../mui-themes\";\r\nimport { useThemeSelector } from \"../hooks/useThemeSelector\";\r\n\r\nconst themeButtonStyle: React.CSSProperties = {\r\n  fontSize: \"140%\",\r\n  cursor: \"pointer\",\r\n  margin: \"-2px 2px 0 2px\",\r\n  display: \"flex\",\r\n  flexGrow: 1,\r\n};\r\n\r\nconst ThemeSelector = () => {\r\n  const { theme, setTheme } = useThemeSelector();\r\n  const currentThemeIndex = Object.values(themes).indexOf(theme);\r\n  const themeKeys = Object.keys(themes);\r\n  const setPreviousTheme = () => {\r\n    const previousKey =\r\n      themeKeys[\r\n        currentThemeIndex > 0 ? currentThemeIndex - 1 : themeKeys.length - 1\r\n      ];\r\n    setTheme(themes[previousKey]);\r\n  };\r\n  const setNextTheme = () => {\r\n    const previousKey =\r\n      themeKeys[\r\n        currentThemeIndex + 1 < themeKeys.length ? currentThemeIndex + 1 : 0\r\n      ];\r\n    setTheme(themes[previousKey]);\r\n  };\r\n  return (\r\n    <Flexbox\r\n      style={{\r\n        flexFlow: \"column\",\r\n        flexGrow: 1,\r\n      }}\r\n      onClick={(e: React.MouseEvent) => {\r\n        e.stopPropagation();\r\n      }}\r\n    >\r\n      <span\r\n        style={{\r\n          display: \"flex\",\r\n          flexGrow: 1,\r\n          fontSize: \"70%\",\r\n          opacity: 0.8,\r\n          paddingTop: 5,\r\n          textAlign: \"center\",\r\n          flexFlow: \"column\",\r\n          textIndent: -10,\r\n        }}\r\n      >\r\n        Theme\r\n      </span>\r\n      <Flexbox style={{ flexGrow: 1 }}>\r\n        <a\r\n          style={themeButtonStyle}\r\n          className=\"noselect\"\r\n          onClick={() => setPreviousTheme()}\r\n        >\r\n          &laquo;\r\n        </a>\r\n        <span style={{ flexGrow: 0, textAlign: \"center\" }}>\r\n          {Object.keys(themes)[Object.values(themes).indexOf(theme)]}\r\n        </span>\r\n        <a\r\n          style={{ ...themeButtonStyle, flexDirection: \"row-reverse\" }}\r\n          className=\"noselect\"\r\n          onClick={() => setNextTheme()}\r\n        >\r\n          &raquo;\r\n        </a>\r\n      </Flexbox>\r\n    </Flexbox>\r\n  );\r\n};\r\n\r\nexport default ThemeSelector;\r\n","import React from \"react\";\r\nimport Drawer from \"@material-ui/core/Drawer\";\r\nimport { observer } from \"mobx-react\";\r\nimport Game from \"../classes/Game\";\r\nimport Title from \"./Title\";\r\nimport MenuList from \"@material-ui/core/MenuList\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ThemeSelector from \"./ThemeSelector\";\r\nimport { useThemeSelector } from \"../hooks/useThemeSelector\";\r\nimport Flexbox from \"./Flexbox\";\r\nimport UndoIcon from \"@material-ui/icons/Undo\";\r\nimport SaveGameIcon from \"@material-ui/icons/SaveTwoTone\";\r\nimport NewGameIcon from \"@material-ui/icons/NoteAddTwoTone\";\r\nimport LoadGameIcon from \"@material-ui/icons/RestorePageTwoTone\";\r\nimport InstructionsIcon from \"@material-ui/icons/InfoTwoTone\";\r\nimport { saveGame, newGame, loadGame } from \"../App\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport { Divider, IconButton } from \"@material-ui/core\";\r\n\r\nconst MenuLinkItem = (props: {\r\n  onClick?: () => void;\r\n  icon?: JSX.Element;\r\n  text: string;\r\n  fontSize?: \"130%\" | \"100%\";\r\n}) => {\r\n  const { icon, onClick, text, fontSize } = props;\r\n  return (\r\n    <ListItem onClick={onClick} style={{ cursor: \"pointer\" }}>\r\n      <Button fullWidth>\r\n        <Flexbox style={{ width: \"70%\" }}>\r\n          <span\r\n            style={{ width: 40, marginRight: fontSize === \"100%\" ? 5 : 15 }}\r\n          >\r\n            {icon && icon}\r\n          </span>\r\n          <Typography\r\n            color=\"textPrimary\"\r\n            style={{ fontSize: fontSize || \"130%\", marginTop: 3 }}\r\n          >\r\n            {text}\r\n          </Typography>\r\n        </Flexbox>\r\n      </Button>\r\n    </ListItem>\r\n  );\r\n};\r\n\r\nconst Menu = observer((props: { game: Game; openHowToPlay: () => any }) => {\r\n  const [isMenuOpen, setIsMenuOpen] = React.useState(false);\r\n  const { theme } = useThemeSelector();\r\n  return (\r\n    <>\r\n      <Title {...{ isMenuOpen, setIsMenuOpen }} />\r\n      <Flexbox style={{ padding: \"0 25px\" }}>\r\n        <Typography\r\n          color=\"textPrimary\"\r\n          style={{ display: \"flex\", flexGrow: 1, padding: \"10px 0\" }}\r\n        >\r\n          Points: {props.game.lineCount}\r\n        </Typography>\r\n        <IconButton onClick={() => props.game.lines.pop()}>\r\n          <UndoIcon />\r\n        </IconButton>\r\n      </Flexbox>\r\n      <Drawer\r\n        anchor=\"left\"\r\n        open={isMenuOpen}\r\n        onClose={() => setIsMenuOpen(false)}\r\n      >\r\n        <Flexbox\r\n          style={{\r\n            flexFlow: \"column\",\r\n            alignItems: \"center\",\r\n            overflow: \"hidden\",\r\n            height: \"100vh\",\r\n            backgroundColor: theme.palette.background.paper,\r\n          }}\r\n        >\r\n          <MenuList\r\n            style={{\r\n              marginTop: \"auto\",\r\n              marginBottom: \"auto\",\r\n              width: 300,\r\n              height: 550,\r\n              backgroundColor: theme.palette.background.paper,\r\n              color: \"#fff\",\r\n              textAlign: \"center\",\r\n            }}\r\n          >\r\n            <ListItem>\r\n              <ThemeSelector />\r\n            </ListItem>\r\n            <Divider style={{ margin: \"2px 10px\" }} />\r\n            <MenuLinkItem\r\n              text=\"New game\"\r\n              icon={<NewGameIcon fontSize=\"large\" />}\r\n              onClick={() => {\r\n                newGame();\r\n                setIsMenuOpen(false);\r\n              }}\r\n            />\r\n            <MenuLinkItem\r\n              text=\"Save game\"\r\n              icon={<SaveGameIcon fontSize=\"large\" />}\r\n              onClick={() => {\r\n                saveGame();\r\n                setIsMenuOpen(false);\r\n              }}\r\n            />\r\n            <MenuLinkItem\r\n              text=\"Load game\"\r\n              icon={<LoadGameIcon fontSize=\"large\" />}\r\n              onClick={() => {\r\n                loadGame().then((isSuccess) => {\r\n                  setIsMenuOpen(false);\r\n                });\r\n              }}\r\n            />\r\n            <Divider style={{ margin: \"2px 10px\" }} />\r\n            <MenuLinkItem\r\n              onClick={() => {\r\n                setIsMenuOpen(false);\r\n                props.openHowToPlay();\r\n              }}\r\n              text=\"How to play?\"\r\n              fontSize=\"100%\"\r\n              icon={<InstructionsIcon fontSize=\"default\" onClick={() => {}} />}\r\n            />\r\n          </MenuList>\r\n        </Flexbox>\r\n      </Drawer>\r\n    </>\r\n  );\r\n});\r\n\r\nexport default Menu;\r\n","import React from \"react\";\r\nimport Game from \"./classes/Game\";\r\nimport { LineModel } from \"./classes/LineModel\";\r\nimport { Board } from \"./components/Board\";\r\nimport { decorate, observable } from \"mobx\";\r\nimport { observer } from \"mobx-react\";\r\nimport { LOCALSTORAGE_STATE_KEY } from \"./classes/constants\";\r\nimport { ThemeProvider } from \"@material-ui/core\";\r\nimport { themes } from \"./mui-themes\";\r\nimport { useThemeSelector } from \"./hooks/useThemeSelector\";\r\nimport Coords from \"./classes/Coords\";\r\n\r\n/** Because React will not re-render by default if the 'game' object\r\n * changes, use MobX to strongly bind it.\r\n * */\r\nclass GameWrapper {\r\n  game: Game = new Game();\r\n}\r\ndecorate(GameWrapper, {\r\n  game: observable,\r\n});\r\nconst gameWrapper = new GameWrapper();\r\n\r\n/** Rendering root for React */\r\nconst App = observer(() => {\r\n  const { theme } = useThemeSelector();\r\n  React.useEffect(() => {\r\n    console.log(\r\n      \"Theme was changed to\",\r\n      Object.keys(themes)[Object.values(themes).indexOf(theme)]\r\n    );\r\n  }, [theme]);\r\n  return (\r\n    <ThemeProvider theme={theme}>\r\n      <Board game={gameWrapper.game} />\r\n    </ThemeProvider>\r\n  );\r\n});\r\n\r\n/** Starts a new game\r\n * TODO: Maybe this should save the new game into Local?\r\n * TODO: Maybe this should end the previous game and display score/end?\r\n */\r\nexport function newGame(): void {\r\n  console.log(\"newGame()\");\r\n  gameWrapper.game = new Game();\r\n}\r\n\r\n/** Save the current line state to Local.\r\n * Only the lines matter. The game has no other saveable states.\r\n */\r\nexport function saveGame(): void {\r\n  const linesJson = JSON.stringify(\r\n    gameWrapper.game.lines.map((line) => line.coords)\r\n  );\r\n  localStorage.setItem(LOCALSTORAGE_STATE_KEY, linesJson);\r\n}\r\n\r\n/** @returns Promise. Resolved true if a game was loaded successfully - false if not. */\r\nexport async function loadGame(): Promise<Boolean> {\r\n  return new Promise((resolve) => {\r\n    // Load the saved state from local\r\n    const linesJson = localStorage.getItem(LOCALSTORAGE_STATE_KEY);\r\n    if (!!linesJson) {\r\n      // Try-catch could be replaced by a versioning system. CBA.\r\n      try {\r\n        // Delete all previous lines\r\n        gameWrapper.game = new Game();\r\n        const lines = (JSON.parse(linesJson) as Array<Coords[]>).map(\r\n          (coords) => new LineModel(coords, gameWrapper.game)\r\n        );\r\n        // Add the saved lines to the game\r\n        lines.forEach((l) => {\r\n          l = new LineModel(l.coords, gameWrapper.game); // Copy object, otherwise the getter for Direction will not work.\r\n          gameWrapper.game.lines.push(l);\r\n        });\r\n        resolve(true);\r\n      } catch (e) {\r\n        resolve(false);\r\n      }\r\n    }\r\n    resolve(false);\r\n  });\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport {\r\n  Drawer,\r\n  Dialog,\r\n  Slide,\r\n  Paper,\r\n  Typography,\r\n  Grid,\r\n} from \"@material-ui/core\";\r\nimport { useWindowSize } from \"../hooks/useWindowSize\";\r\nimport line_example from \"../img/line_example.png\";\r\nimport possible_lines_example from \"../img/possible_lines_example.png\";\r\n\r\nconst P = (props: React.HTMLProps<HTMLParagraphElement>) => {\r\n  return (\r\n    <Typography variant=\"body1\" style={{ padding: \"5px 0\" }}>\r\n      {props.children}\r\n    </Typography>\r\n  );\r\n};\r\n\r\nconst HowToPlay = (props: { isOpen: boolean; onClose: () => any }) => {\r\n  const windowSize = useWindowSize();\r\n  const maxWidth = 600;\r\n  const width = Math.min(\r\n    Math.min(windowSize.width!, windowSize.height!),\r\n    maxWidth\r\n  );\r\n  return !props.isOpen ? (\r\n    <></>\r\n  ) : (\r\n    <Dialog\r\n      open={props.isOpen}\r\n      TransitionComponent={React.forwardRef((props, ref) => (\r\n        <Slide direction=\"down\" {...{ ref }} {...props} />\r\n      ))}\r\n      onClose={props.onClose}\r\n    >\r\n      <Paper style={{ width }}>\r\n        <Grid style={{ padding: 20 }} container>\r\n          <Typography variant=\"h4\">How to play Linegame</Typography>\r\n          <P>\r\n            The goal of the game is to create as many lines as possible.\r\n            <br />\r\n            The game will end when no more lines can be drawn.\r\n          </P>\r\n          <Grid xs={12} style={{ textAlign: \"center\" }}>\r\n            <img src={line_example} />\r\n          </Grid>\r\n          <P>\r\n            A line can be created by selecting a dot to start the line from, and\r\n            the direction of the line. The direction can be horizontal,\r\n            vertical, or diagonal.\r\n          </P>\r\n          <Grid xs={12} style={{ textAlign: \"center\" }}>\r\n            <img src={possible_lines_example} />\r\n          </Grid>\r\n          <P>\r\n            A line must have a length of 5 cells (5 dots), and lines cannot\r\n            overlap each other. <br />\r\n            At the start, most of the dots are unopened - only 1 of the lines\r\n            dots can be unopened when drawing it!\r\n          </P>\r\n          <P>Click on a cell to see what lines can be drawn from it.</P>\r\n        </Grid>\r\n      </Paper>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default HowToPlay;\r\n","import React, { CSSProperties } from \"react\";\r\nimport Game from \"../classes/Game\";\r\nimport { BOARD_MATRIX_SIZE } from \"../classes/constants\";\r\nimport { Row } from \"./Row\";\r\nimport { observer } from \"mobx-react\";\r\nimport Menu from \"./Menu\";\r\nimport { LineOverlayComponent, updateOverlay } from \"./LineOverlay\";\r\nimport { useThemeSelector } from \"../hooks/useThemeSelector\";\r\nimport Flexbox from \"./Flexbox\";\r\nimport { useWindowSize } from \"../hooks/useWindowSize\";\r\nimport HowToPlay from \"./HowToPlay\";\r\n\r\nexport const Board = observer((props: { game: Game }) => {\r\n  const { game } = props;\r\n  const tableRef = React.useRef<HTMLTableElement>(null);\r\n  const { theme } = useThemeSelector();\r\n  const windowSize = useWindowSize();\r\n  const sizeConstraint = Math.min(windowSize.height!, windowSize.width!);\r\n  const frameWidthTotal = 20;\r\n  const maxCellSize = 25;\r\n  const cellSize = Math.min(\r\n    Math.floor((sizeConstraint - frameWidthTotal) / BOARD_MATRIX_SIZE),\r\n    maxCellSize\r\n  );\r\n  React.useEffect(() => {\r\n    updateOverlay();\r\n  }, [windowSize]);\r\n  const style: CSSProperties = {\r\n    width: BOARD_MATRIX_SIZE * cellSize,\r\n    margin: \"auto\",\r\n  };\r\n  const [isHowToPlayOpen, setIsHowToPlayOpen] = React.useState(false);\r\n  return (\r\n    <Flexbox\r\n      style={{\r\n        background: theme.palette.background.default,\r\n        margin: \"auto\",\r\n        justifyContent: \"center\",\r\n        flexFlow: \"column\",\r\n        border: `1px solid ${theme.palette.primary.main}`,\r\n      }}\r\n    >\r\n      <Flexbox\r\n        style={{\r\n          flexFlow: \"column\",\r\n          margin: \"auto\",\r\n          padding: 5,\r\n          borderRadius: theme.spacing(1),\r\n          background: theme.palette.background.paper,\r\n        }}\r\n      >\r\n        <Menu game={game} openHowToPlay={() => setIsHowToPlayOpen(true)} />\r\n        <HowToPlay isOpen={isHowToPlayOpen} onClose={() => setIsHowToPlayOpen(false)} />\r\n        <table ref={tableRef} cellSpacing={1} style={style}>\r\n          <tbody>\r\n            {game.rows.map((row) => (\r\n              <Row game={game} key={row.yIndex} {...row} cellSize={cellSize} />\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n        <LineOverlayComponent game={game} tableRef={tableRef} />\r\n      </Flexbox>\r\n    </Flexbox>\r\n  );\r\n});\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./reset.css\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(\n  <React.StrictMode>\n      <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJgAAAAmCAYAAAA4AlIkAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAJ7SURBVHhe7ZyxagJBEIZ9EZ8ioFzS2QlCQLARbBJJcoJwcCm0ELExdikF27xDsPYZ7FLlSTa7Jqe3x+xlJ7kdxJniaybLTvb//z1mG2sfn3sFET0+gPVQXHI/zlpKwAjgrKUEjADOWkrACOCspQSMAM5a1swfBSEU8gUjgLOWEjACOGspASOAs5YSMAI4aykBI4CzlhIwAjhrKQEjgLOWEjACOGspASOAs5YSMAI4aykBI4CzltUFbDdTjaip6j80lu/wOgfYfttl59irHnXU8w5e5wLbbz06na0eDdUaWOMCb/hG9Y69NKMNsMbNOXn3p4Ddv7zazKfq+m6q+rlaN35S18nKXlfCTZyCdYh+Mi7svVCtwVi15/a6MjD9zFlak1zNnHeQqm5uTRmYXt9nsfc2572KF7k15aD6eXoH5SAjeMC6+kCQ2K46hL8o2gBQbFcdxrufNqAFXRRXHQBjeD9JwYviqkNg+vl6B+UgI3DAVqqdwMYGEUUb285/TY7o/yO2b2IZ3v0muh94Bv9AowxPHGeYpPZXtAT/fv7eQTnIqDxgRdYjeCZx1SH8++n5BJxJXHUY7356PulBM4mrDoDRcrscgvOkqw5xTt5VM+SbIfF2pra5mhmKMcMizoROYW8zFOMGfZwJTdV7y9UOQ3GIy2MwZ7H3PjxoQlweQ2DvqgmY4SD66SViGeIBtp/9ivQ3OwPbz3pFFgz5DbSWhVdk6Bd5SO+qC9g/ueR+nLWUgBHAWUsJGAGctZSAEcBZSwkYAZy1lIARwFlLCRgBnLWUgBHAWUsJGAGctZTfphCCIl8wAjhrKQEjgLOWEjACOGspASOAr5Z79QUswyh9FvyE2gAAAABJRU5ErkJggg==\"","module.exports = __webpack_public_path__ + \"static/media/possible_lines_example.262817d2.png\";"],"sourceRoot":""}